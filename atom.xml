<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>GLADIUM</title>
  
  <subtitle>ç”¨è–ªç«ç‚¹äº®ä¸–ç•Œ</subtitle>
  <link href="https://blog.gladium.cn/atom.xml" rel="self"/>
  
  <link href="https://blog.gladium.cn/"/>
  <updated>2024-05-19T08:16:30.356Z</updated>
  <id>https://blog.gladium.cn/</id>
  
  <author>
    <name>Gladium</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>è¯­é›€æ–‡æ¡£</title>
    <link href="https://blog.gladium.cn/3efb.html"/>
    <id>https://blog.gladium.cn/3efb.html</id>
    <published>2024-05-19T08:16:30.356Z</published>
    <updated>2024-05-19T08:16:30.356Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Markdown-å’Œå¿«æ·é”®è¦†ç›–"><a href="#Markdown-å’Œå¿«æ·é”®è¦†ç›–" class="headerlink" title="Markdown å’Œå¿«æ·é”®è¦†ç›–"></a>Markdown å’Œå¿«æ·é”®è¦†ç›–</h2><blockquote><p>ğŸ’¡ Tipsï¼šè¯­é›€æ”¯æŒå…¨åŠŸèƒ½ markdown è¯­æ³•ï¼Œå¯ä»¥ç‚¹å‡»æ–‡æ¡£ç¼–è¾‘é¡µå³ä¸‹è§’å°é”®ç›˜æŸ¥çœ‹å…¨éƒ¨æ”¯æŒçš„è¯­æ³•å’Œå¿«æ·é”®ã€‚</p></blockquote><ul><li>æ”¯æŒå¯¼å…¥å¯¼å‡º <code>markdown</code> æ–‡ä»¶ã€‚</li><li>æ”¯æŒè‡ªåŠ¨è¯†åˆ«ç²˜è´´çš„ <code>markdown</code> æ ¼å¼å†…å®¹è½¬æ¢ä¸ºå¯Œæ–‡æœ¬ã€‚</li></ul><h2 id="è¡Œå†…ä»£ç "><a href="#è¡Œå†…ä»£ç " class="headerlink" title="è¡Œå†…ä»£ç "></a>è¡Œå†…ä»£ç </h2><blockquote><p>ğŸ’¡ Tipsï¼šå¯é€šè¿‡ markdown è¯­æ³•ï¼ˆ<code>+ `code` + </code> + <code>ç©ºæ ¼</code>ï¼‰æˆ–è€…å¿«æ·é”® <code>ctrl/cmd</code> + <code>E</code>å¿«é€Ÿæ’å…¥è¡Œå†…ä»£ç ã€‚</p></blockquote><p>åœ¨æ–‡æœ¬ä¸­ä½¿ç”¨<code>è¡Œå†…ä»£ç </code>ï¼Œå¯ä»¥é¡ºç•…åœ°æ˜¾ç¤ºä»£ç å˜é‡åã€‚</p><h2 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h2><blockquote><p>ğŸ’¡ Tipsï¼šè¾“å…¥<code>/ä»£ç å—</code>æˆ–ç‚¹å‡»ä¸Šæ–¹å·¥å…·æ ç‚¹å‡»ä¸Šæ–¹å·¥å…·æ <img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/56ff3338319771cb6da677be0a8f8505.png" alt="image.png">ï¼Œé€‰æ‹©ã€Œä»£ç å—ã€ã€æ’å…¥ä»£ç å¡ç‰‡ã€‚</p></blockquote><p>ä»£ç å—åŒæ—¶æ”¯æŒå¤šç§é¢œè‰²ä¸»é¢˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span> <span class="keyword">extends</span> <span class="title">Sort</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">sort</span>(<span class="params">originalArray</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> array = [...originalArray];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (array.length &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Init left and right arrays.</span></span><br><span class="line">    <span class="keyword">const</span> leftArray = [];</span><br><span class="line">    <span class="keyword">const</span> rightArray = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Take the first element of array as a pivot.</span></span><br><span class="line">    <span class="keyword">const</span> pivotElement = array.shift();</span><br><span class="line">    <span class="keyword">const</span> centerArray = [pivotElement];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Split all array elements between left, center and right arrays.</span></span><br><span class="line">    <span class="keyword">while</span> (array.length) &#123;</span><br><span class="line">      <span class="keyword">const</span> currentElement = array.shift();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Call visiting callback.</span></span><br><span class="line">      <span class="built_in">this</span>.callbacks.visitingCallback(currentElement);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.comparator.equal(currentElement, pivotElement)) &#123;</span><br><span class="line">        centerArray.push(currentElement);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.comparator.lessThan(currentElement, pivotElement)) &#123;</span><br><span class="line">        leftArray.push(currentElement);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        rightArray.push(currentElement);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Sort left and right arrays.</span></span><br><span class="line">    <span class="keyword">const</span> leftArraySorted = <span class="built_in">this</span>.sort(leftArray);</span><br><span class="line">    <span class="keyword">const</span> rightArraySorted = <span class="built_in">this</span>.sort(rightArray);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> leftArraySorted.concat(centerArray, rightArraySorted);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span> <span class="keyword">extends</span> <span class="title">Sort</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">sort</span>(<span class="params">originalArray</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> array = [...originalArray];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (array.length &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Init left and right arrays.</span></span><br><span class="line">    <span class="keyword">const</span> leftArray = [];</span><br><span class="line">    <span class="keyword">const</span> rightArray = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Take the first element of array as a pivot.</span></span><br><span class="line">    <span class="keyword">const</span> pivotElement = array.shift();</span><br><span class="line">    <span class="keyword">const</span> centerArray = [pivotElement];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Split all array elements between left, center and right arrays.</span></span><br><span class="line">    <span class="keyword">while</span> (array.length) &#123;</span><br><span class="line">      <span class="keyword">const</span> currentElement = array.shift();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Call visiting callback.</span></span><br><span class="line">      <span class="built_in">this</span>.callbacks.visitingCallback(currentElement);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.comparator.equal(currentElement, pivotElement)) &#123;</span><br><span class="line">        centerArray.push(currentElement);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.comparator.lessThan(currentElement, pivotElement)) &#123;</span><br><span class="line">        leftArray.push(currentElement);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        rightArray.push(currentElement);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Sort left and right arrays.</span></span><br><span class="line">    <span class="keyword">const</span> leftArraySorted = <span class="built_in">this</span>.sort(leftArray);</span><br><span class="line">    <span class="keyword">const</span> rightArraySorted = <span class="built_in">this</span>.sort(rightArray);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> leftArraySorted.concat(centerArray, rightArraySorted);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span> <span class="keyword">extends</span> <span class="title">Sort</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">sort</span>(<span class="params">originalArray</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> array = [...originalArray];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (array.length &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Init left and right arrays.</span></span><br><span class="line">    <span class="keyword">const</span> leftArray = [];</span><br><span class="line">    <span class="keyword">const</span> rightArray = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Take the first element of array as a pivot.</span></span><br><span class="line">    <span class="keyword">const</span> pivotElement = array.shift();</span><br><span class="line">    <span class="keyword">const</span> centerArray = [pivotElement];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Split all array elements between left, center and right arrays.</span></span><br><span class="line">    <span class="keyword">while</span> (array.length) &#123;</span><br><span class="line">      <span class="keyword">const</span> currentElement = array.shift();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Call visiting callback.</span></span><br><span class="line">      <span class="built_in">this</span>.callbacks.visitingCallback(currentElement);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.comparator.equal(currentElement, pivotElement)) &#123;</span><br><span class="line">        centerArray.push(currentElement);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.comparator.lessThan(currentElement, pivotElement)) &#123;</span><br><span class="line">        leftArray.push(currentElement);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        rightArray.push(currentElement);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Sort left and right arrays.</span></span><br><span class="line">    <span class="keyword">const</span> leftArraySorted = <span class="built_in">this</span>.sort(leftArray);</span><br><span class="line">    <span class="keyword">const</span> rightArraySorted = <span class="built_in">this</span>.sort(rightArray);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> leftArraySorted.concat(centerArray, rightArraySorted);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ•°å­¦å…¬å¼"><a href="#æ•°å­¦å…¬å¼" class="headerlink" title="æ•°å­¦å…¬å¼"></a>æ•°å­¦å…¬å¼</h2><blockquote><p>ğŸ’¡ Tipsï¼šè¾“å…¥ <code>/å…¬å¼</code>æˆ–ç‚¹å‡»ä¸Šæ–¹å·¥å…·æ ç‚¹å‡»ä¸Šæ–¹å·¥å…·æ <img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/56ff3338319771cb6da677be0a8f8505.png" alt="image.png">ï¼Œé€‰æ‹©ã€Œå…¬å¼ã€ã€æ’å…¥å…¬å¼å¡ç‰‡ã€‚</p></blockquote><p>å…¬å¼æ”¯æŒè¡Œå†…åµŒå¥—ï¼š<img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/5221cc096f88c6a61f3352f96308af6c.svg">ï¼Œä¹Ÿæ”¯æŒå—çº§åµŒå…¥ã€‚<br><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/01a796f92ec26b3af0376bb04464ef7a.svg"></p><h2 id="ç”»æ¿"><a href="#ç”»æ¿" class="headerlink" title="ç”»æ¿"></a>ç”»æ¿</h2><blockquote><p>ğŸ’¡ Tipsï¼šè¾“å…¥<code>/ç”»æ¿</code>æˆ–ç‚¹å‡»ä¸Šæ–¹å·¥å…·æ <img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/56ff3338319771cb6da677be0a8f8505.png" alt="image.png">ï¼Œé€‰æ‹©ã€Œç”»æ¿ã€ã€ç»˜åˆ¶æµç¨‹å›¾ã€æ¶æ„å›¾ç­‰å„ç§å›¾å½¢ã€‚</p></blockquote><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/2e4d58c692e4967cb73e55245c1e4adf.jpeg"><br><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/f962823b05f9678989fa387d673f152c.jpeg"></p><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/51d8680705144647ec386c0f405d0b33.jpeg"></p><h2 id="æ–‡æœ¬ç»˜å›¾"><a href="#æ–‡æœ¬ç»˜å›¾" class="headerlink" title="æ–‡æœ¬ç»˜å›¾"></a>æ–‡æœ¬ç»˜å›¾</h2><blockquote><p>ğŸ’¡ Tipsï¼šè¾“å…¥<code>/æ–‡æœ¬ç»˜å›¾</code>ç‚¹å‡»ä¸Šæ–¹å·¥å…·æ <img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/56ff3338319771cb6da677be0a8f8505.png" alt="image.png">ï¼Œé€‰æ‹©ã€Œæ–‡æœ¬ç»˜å›¾ã€ã€æ’å…¥æ–‡æœ¬ç»˜å›¾å¡ç‰‡ã€‚<br>æ”¯æŒ <a href="https://plantuml.com/">plantuml</a>ã€<a href="https://mermaid-js.github.io/mermaid/#/">mermaid</a> ç­‰å¤šç§æ ¼å¼ï¼Œç‚¹å‡»<code>é¢„è§ˆ</code>å¯çœ‹åˆ°å›¾å½¢ã€‚å…·ä½“ä»£ç æ ·å¼è§<a href="https://www.yuque.com/yuque/gpvawt/gantt">è¯´æ˜æ–‡æ¡£</a>ã€‚</p></blockquote><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/11d2fd73b2136ebaf7b87820d769df2f.svg"><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/48acc23cf4775c304a7e4bef2404e592.svg"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Markdown-å’Œå¿«æ·é”®è¦†ç›–&quot;&gt;&lt;a href=&quot;#Markdown-å’Œå¿«æ·é”®è¦†ç›–&quot; class=&quot;headerlink&quot; title=&quot;Markdown å’Œå¿«æ·é”®è¦†ç›–&quot;&gt;&lt;/a&gt;Markdown å’Œå¿«æ·é”®è¦†ç›–&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ğŸ’¡ Ti</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://blog.gladium.cn/3eeb.html"/>
    <id>https://blog.gladium.cn/3eeb.html</id>
    <published>2024-05-19T08:16:30.356Z</published>
    <updated>2024-05-19T08:16:30.356Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post11"><a href="#Create-a-new-post11" class="headerlink" title="Create a new post11"></a>Create a new post11</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>åŸºäºRTreeç´¢å¼•å’Œå°„çº¿æ³•å®ç°çš„ç”µå­å›´æ </title>
    <link href="https://blog.gladium.cn/57ca.html"/>
    <id>https://blog.gladium.cn/57ca.html</id>
    <published>2024-04-03T00:00:00.000Z</published>
    <updated>2024-05-19T08:16:57.060Z</updated>
    
    <content type="html"><![CDATA[<p>ç”µå­å›´æ æŠ€æœ¯è¢«å¹¿æ³›åº”ç”¨äºåœ°ç†å›´æ ã€å®‰é˜²ç›‘æ§ã€æ— äººæœºé™åˆ¶é£è¡ŒåŒºåŸŸç­‰é¢†åŸŸã€‚å¦‚ä½•å¿«é€Ÿè€Œå‡†ç¡®åœ°åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨ä¸€ä¸ªå¤šè¾¹å½¢åŒºåŸŸå†…ï¼Œæ˜¯å®ç°ç”µå­å›´æ çš„æ ¸å¿ƒé—®é¢˜ã€‚åœ¨è½¦è”ç½‘åœºæ™¯ä¸‹ï¼Œéœ€è¦ç”¨åˆ°å¤§é‡çš„åŸºäºç»çº¬åº¦çš„ç”µå­å›´æ ï¼Œç‰¹åˆ«æ˜¯å¤šè¾¹å½¢å›´æ ï¼ŒåŸºæœ¬ä¸Šè´¯ç©¿è½¦è¾†ç›‘æ§å’Œç®¡ç†çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œä¸”å…¶é«˜é¢‘çš„å®šä½èšç„¦åˆ°å¹³å°åšäº‘è®¡ç®—ï¼Œä¼šè®©ç®€å•çš„å°„çº¿æ³•æ¶ˆè€—åºå¤§çš„è®¡ç®—èµ„æºå¼€é”€å’Œé€ æˆå®æ—¶ç§¯å‹ï¼Œå› æ­¤ï¼Œåå°„æ³•ç»“åˆRTreeç®—æ³•è¿›è¡Œç²—ç­›æˆä¸ºé«˜æ•ˆåˆ¤æ–­æ˜¯å¦åœ¨å›´æ çš„é‡è¦æ–¹å¼ã€‚</p><h1 id="å°„çº¿æ³•"><a href="#å°„çº¿æ³•" class="headerlink" title="å°„çº¿æ³•"></a>å°„çº¿æ³•</h1><p>å°„çº¿æ³•ï¼ˆRay Castingï¼‰æ˜¯ä¸€ç§åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…çš„ç»å…¸ç®—æ³•ã€‚å…¶åŸºæœ¬åŸç†æ˜¯ï¼šä»å¾…åˆ¤æ–­ç‚¹å‘ä»»æ„æ–¹å‘å¼•ä¸€æ¡å°„çº¿ï¼Œè®¡ç®—è¯¥å°„çº¿ä¸å¤šè¾¹å½¢è¾¹ç•Œçš„äº¤ç‚¹æ•°ã€‚å¦‚æœäº¤ç‚¹æ•°ä¸ºå¥‡æ•°ï¼Œåˆ™ç‚¹åœ¨å¤šè¾¹å½¢å†…ï¼›å¦‚æœäº¤ç‚¹æ•°ä¸ºå¶æ•°ï¼Œåˆ™ç‚¹åœ¨å¤šè¾¹å½¢å¤–ã€‚</p><h2 id="å›¾å½¢è¯´æ˜"><a href="#å›¾å½¢è¯´æ˜" class="headerlink" title="å›¾å½¢è¯´æ˜"></a>å›¾å½¢è¯´æ˜</h2><p>åœ¨å¦‚ä¸‹å›¾çš„ä¸€ä¸ªä¸è§„å¾‹çš„å¤šè¾¹å½¢ä¸­ï¼Œæ€ä¹ˆåˆ¤æ–­è¿™ä¸ªç‚¹æ˜¯ä¸æ˜¯åœ¨å¤šè¾¹å½¢å†…éƒ¨   (ğŸ˜®â€ğŸ’¨åˆ«å‘Šè¯‰æˆ‘ç”¨è‚‰çœ¼è§‚å¯Ÿâ€¦â€¦ï¼‰<br><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/0a13f4114d581a42223eeb19438b4ba0.png" alt="image.png"><br>é’ˆå¯¹è¿™ä¸ªå¹³é¢å†…ä»»æ„é—­åˆæ›²çº¿ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç›´è§‚åœ°è®¤ä¸ºï¼Œæ›²çº¿æŠŠå¹³é¢åˆ†å‰²æˆäº†å†…ã€å¤–ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­â€œå†…â€å°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„å¤šè¾¹å½¢åŒºåŸŸ<br><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/9b5fc86ec7bcd81305c125138766fbb9.png" alt="image.png"><br>åŸºäºè¿™ä¸€è®¤è¯†ï¼Œå¯¹äºå¹³é¢å†…ä»»æ„ä¸€æ¡ç›´çº¿ï¼Œå¯ä»¥æœ‰ä¸‹é¢è¿™äº›ç»“è®ºï¼š</p><ul><li>ç›´çº¿ç©¿è¶Šå¤šè¾¹å½¢è¾¹ç•Œæ—¶ï¼Œæœ‰ä¸”åªæœ‰ä¸¤ç§æƒ…å†µï¼šè¿›å…¥å¤šè¾¹å½¢æˆ–ç©¿å‡ºå¤šè¾¹å½¢ã€‚</li><li>åœ¨ä»…è€ƒè™‘äºŒç»´å¹³é¢çš„æƒ…å†µä¸‹ï¼Œç›´çº¿ä¸å¯èƒ½ä»å†…éƒ¨å†æ¬¡è¿›å…¥å¤šè¾¹å½¢ï¼Œæˆ–ä»å¤–éƒ¨å†æ¬¡ç©¿å‡ºå¤šè¾¹å½¢ï¼Œå³è¿ç»­ä¸¤æ¬¡ç©¿è¶Šè¾¹ç•Œçš„æƒ…å†µå¿…ç„¶æˆå¯¹ã€‚</li><li>ç›´çº¿å¯ä»¥æ— é™å»¶ä¼¸ï¼Œè€Œé—­åˆæ›²çº¿åŒ…å›´çš„åŒºåŸŸæ˜¯æœ‰é™çš„ï¼Œå› æ­¤æœ€åä¸€æ¬¡ç©¿è¶Šå¤šè¾¹å½¢è¾¹ç•Œï¼Œä¸€å®šæ˜¯ç©¿å‡ºå¤šè¾¹å½¢ï¼Œåˆ°è¾¾å¤–éƒ¨ã€‚</li></ul><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/4f6aea0726b6d32bd50d24c32ad28bc4.png" alt="image.png"></p><h2 id="ç®—æ³•è½¬æ¢"><a href="#ç®—æ³•è½¬æ¢" class="headerlink" title="ç®—æ³•è½¬æ¢"></a>ç®—æ³•è½¬æ¢</h2><ul><li>å½“å°„çº¿ç©¿è¶Šå¤šè¾¹å½¢è¾¹ç•Œçš„æ¬¡æ•°ä¸ºå¶æ•°æ—¶ï¼Œæ‰€æœ‰ç¬¬å¶æ•°æ¬¡ï¼ˆåŒ…æ‹¬æœ€åä¸€æ¬¡ï¼‰ç©¿è¶Šéƒ½æ˜¯ç©¿å‡ºï¼Œå› æ­¤æ‰€æœ‰ç¬¬å¥‡æ•°æ¬¡ï¼ˆåŒ…æ‹¬ç¬¬ä¸€æ¬¡ï¼‰ç©¿è¶Šä¸ºç©¿å…¥ï¼Œç”±æ­¤å¯æ¨æ–­ç‚¹åœ¨å¤šè¾¹å½¢å¤–éƒ¨ã€‚<br><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/e1515c24ed94cffd4edf0a159cc949a0.png"></li><li>å½“å°„çº¿ç©¿è¶Šå¤šè¾¹å½¢è¾¹ç•Œçš„æ¬¡æ•°ä¸ºå¥‡æ•°æ—¶ï¼Œæ‰€æœ‰ç¬¬å¥‡æ•°æ¬¡ï¼ˆåŒ…æ‹¬ç¬¬ä¸€æ¬¡å’Œæœ€åä¸€æ¬¡ï¼‰ç©¿è¶Šéƒ½æ˜¯ç©¿å‡ºï¼Œç”±æ­¤å¯æ¨æ–­ç‚¹åœ¨å¤šè¾¹å½¢å†…éƒ¨ã€‚<br><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/ec26c30f1a655f896664691cba653d60.png"></li><li>å½“ç‚¹åœ¨å¤šè¾¹å½¢çš„çº¿ä¸Šæˆ–è€…ä¸å¤šå˜å½¢é¡¶ç‚¹é‡åˆæ—¶ï¼Œé€šè¿‡è®¡ç®—ç‚¹ä¸ä¸¤ä¸ªå¤šè¾¹å½¢é¡¶ç‚¹çš„è¿çº¿æ–œç‡æ˜¯å¦ç›¸ç­‰å³å¯</li></ul><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/51c479d58862244cd2d1fa95c5f86690.png" alt="image.png"></p><ul><li>å½“ç‚¹è¿ç»­ç»è¿‡äº†å¤šè¾¹å½¢çš„ä¸¤ä¸ªç›¸é‚»é¡¶ç‚¹ï¼Œå³å°„çº¿å¹³è¡Œäºå¤šè¾¹å½¢çš„ä¸€æ¡è¾¹ï¼Œå¯ä»¥é€šè¿‡å°„çº¿è¿ç»­ç»è¿‡çš„ä¸¤ä¸ªé¡¶ç‚¹å¦‚æœéƒ½ä½äºå°„çº¿ä»¥ä¸Šçš„ä¸€ä¾§ï¼Œå› æ­¤è¿™ç§æƒ…å†µçœ‹ä½œæ²¡æœ‰å‘ç”Ÿç©¿è¶Šå°±å¯ä»¥</li></ul><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/38b38293b45562b669c4262e9c366922.png" alt="image.png"></p><h2 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolygonFence</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Point&gt; vertices;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PolygonFence</span><span class="params">(List&lt;Point&gt; vertices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.vertices = vertices;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isInside</span><span class="params">(Point point)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> intersectCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vertices.size(); i++) &#123;</span><br><span class="line">            Point start = vertices.get(i);</span><br><span class="line">            Point end = vertices.get((i + <span class="number">1</span>) % vertices.size());</span><br><span class="line">            <span class="keyword">if</span> (isRayIntersectsSegment(point, start, end)) &#123;</span><br><span class="line">                intersectCount++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (intersectCount % <span class="number">2</span>) == <span class="number">1</span>; <span class="comment">// å¥‡æ•°è¡¨ç¤ºåœ¨å¤šè¾¹å½¢å†…</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isRayIntersectsSegment</span><span class="params">(Point point, Point start, Point end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> px = point.getLon();</span><br><span class="line">        <span class="keyword">double</span> py = point.getLat();</span><br><span class="line">        <span class="keyword">double</span> sx = start.getLon();</span><br><span class="line">        <span class="keyword">double</span> sy = start.getLat();</span><br><span class="line">        <span class="keyword">double</span> ex = end.getLon();</span><br><span class="line">        <span class="keyword">double</span> ey = end.getLat();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¾¹å¹³è¡Œäºxè½´ï¼Œä¸ç›¸äº¤</span></span><br><span class="line">        <span class="keyword">if</span> (sy == ey) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç‚¹åœ¨è¾¹çš„ä¸Šæ–¹æˆ–ä¸‹æ–¹</span></span><br><span class="line">        <span class="keyword">if</span> (py &lt; Math.min(sy, ey) || py &gt; Math.max(sy, ey)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¡ç®—äº¤ç‚¹çš„xåæ ‡</span></span><br><span class="line">        <span class="keyword">double</span> xIntersect = sx + (py - sy) * (ex - sx) / (ey - sy);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// äº¤ç‚¹åœ¨ç‚¹çš„å³è¾¹</span></span><br><span class="line">        <span class="keyword">return</span> xIntersect &gt; px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="RTreeç´¢å¼•"><a href="#RTreeç´¢å¼•" class="headerlink" title="RTreeç´¢å¼•"></a>RTreeç´¢å¼•</h1><p>RTree æ˜¯ä¸€ç§å¹¿æ³›åº”ç”¨äºç©ºé—´æ•°æ®ç´¢å¼•çš„æ•°æ®ç»“æ„ã€‚å®ƒé€šè¿‡å°†ç©ºé—´æ•°æ®ï¼ˆå¦‚ç‚¹ã€çŸ©å½¢ç­‰ï¼‰ç»„ç»‡æˆæ ‘å½¢ç»“æ„ï¼Œæ”¯æŒå¿«é€Ÿçš„åŒºåŸŸæŸ¥è¯¢å’Œé‚»è¿‘æŸ¥è¯¢ã€‚RTree çš„èŠ‚ç‚¹åˆ†ä¸ºå¶èŠ‚ç‚¹å’Œå†…éƒ¨èŠ‚ç‚¹ï¼Œå¶èŠ‚ç‚¹å­˜å‚¨å®é™…çš„æ•°æ®å¯¹è±¡ï¼Œå†…éƒ¨èŠ‚ç‚¹å­˜å‚¨å­èŠ‚ç‚¹çš„æœ€å°å¤–åŒ…çŸ©å½¢ï¼ˆMBR, Minimum Bounding Rectangleï¼‰ã€‚</p><h2 id="ä¸ºä»€ä¹ˆç”¨RTreeç´¢å¼•"><a href="#ä¸ºä»€ä¹ˆç”¨RTreeç´¢å¼•" class="headerlink" title="ä¸ºä»€ä¹ˆç”¨RTreeç´¢å¼•"></a>ä¸ºä»€ä¹ˆç”¨RTreeç´¢å¼•</h2><p>å½“åœ°ç†å›´æ å¤šè¾¹å½¢æ•°ç›®è¾ƒå°‘æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¾æ¬¡éå†æ¯ä¸€ä¸ªå¤šè¾¹å½¢ï¼ˆæš´åŠ›éå†æ³•ï¼‰ï¼Œç„¶åç”¨å°„çº¿æ³•è¿›è¡Œåˆ¤æ–­ï¼Œè¿™æ ·æ•ˆç‡ä¹Ÿå¾ˆé«˜ã€‚è€Œå½“å¤šè¾¹å½¢æ•°ç›®è¾ƒå¤šæ—¶ï¼Œæ¯”å¦‚æœ‰10ä¸‡ä¸ªå¤šè¾¹å½¢ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æ‰§è¡Œ10ä¸‡æ¬¡å°„çº¿æ³•ã€‚æš´åŠ›éå†æ³•æ•ˆç‡ä½ä¸‹çš„åŸå› æ˜¯ä¸æ¯ä¸€ä¸ªå¤šè¾¹å½¢éƒ½è¿›è¡Œäº†å°„çº¿æ³•åˆ¤æ–­ï¼Œå¦‚æœèƒ½å‡å°‘å°„çº¿æ³•çš„è°ƒç”¨æ¬¡æ•°æ€§èƒ½å°±èƒ½æå‡ã€‚å› æ­¤å¼•å…¥Rtreeç´¢å¼•é€šè¿‡ç²—ç­›çš„æ–¹æ³•å¿«é€Ÿæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å°‘é‡å¤šè¾¹å½¢ï¼Œç„¶åå¯¹ç²—ç­›åçš„å¤šè¾¹å½¢ä½¿ç”¨å°„çº¿æ³•åˆ¤æ–­ï¼Œè¿™æ ·å°„çº¿æ³•çš„æ‰§è¡Œæ¬¡æ•°å¤§å¤§é™ä½ï¼Œæ•ˆç‡ä¹Ÿèƒ½å¤§å¤§æé«˜ã€‚</p><blockquote><p>ğŸ’¡å¯¹äºä¸€ç»´æ•°æ®æˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨ç´¢å¼•çš„æ–¹æ³•ï¼Œæ¯”å¦‚é€šè¿‡Bæ ‘ç´¢å¼•æ‰¾åˆ°æŸä¸€ä¸ªèŒƒå›´åŒºé—´æ®µï¼Œç„¶åå¯¹æ­¤èŒƒå›´åŒºé—´æ®µè¿›è¡Œéå†æŸ¥æ‰¾ï¼Œå¯¹äºäºŒç»´ç©ºé—´æ•°æ®å¸¸å¸¸ä½¿ç”¨ç©ºé—´ç´¢å¼•çš„æ–¹æ³•ï¼Œæ¯”å¦‚é€šè¿‡Ræ ‘æ‰¾åˆ°èŒƒå›´åŒºé—´å†…çš„å¤šè¾¹å½¢ï¼Œç„¶åå¯¹æ­¤èŒƒå›´å†…çš„å¤šè¾¹å½¢è¿›è¡Œç²¾ç¡®åˆ¤æ–­</p></blockquote><h2 id="RTreeç®—æ³•æ€è·¯"><a href="#RTreeç®—æ³•æ€è·¯" class="headerlink" title="RTreeç®—æ³•æ€è·¯"></a>RTreeç®—æ³•æ€è·¯</h2><ul><li>æ„å»ºå¤šè¾¹å½¢çš„æœ€å°å¤–åŒ…çŸ©å½¢ï¼ˆMBRï¼‰å¹¶ç”¨ RTree è¿›è¡Œç´¢å¼•</li></ul><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/7755139ecb115da15249bac4a0b676f0.png" alt="image.png"></p><blockquote><p>ğŸ’¡æ ¸å¿ƒæ˜¯è·å–å¤šè¾¹å½¢æœ€å¤§çš„x,yè½´åæ ‡ï¼Œå¹¶æ„å»ºæœ€å°å¤–åŒ…çŸ©å½¢</p></blockquote><ul><li>å°† MBR åˆ’åˆ†ä¸ºå¤šä¸ªå­çŸ©å½¢ï¼Œå¹¶å­˜å‚¨åˆ° RTree ä¸­</li></ul><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/84827c7abf98d9fa2af58b8233de8c7c.png" alt="image.png"></p><blockquote><p>ğŸ’¡å¤šä¸ªmbrä¼šæœ‰ä¸€å®šçš„äº¤é›†ï¼Œè¿™ä¸ªæ­£å¸¸æ˜¯è¢«å…è®¸çš„ï¼Œå› ä¸ºåœ¨æ„å»ºå¤šè¾¹å½¢çš„mbrè¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰ä¸€ç‚¹çš„ç©ºé—´æ‰©å……</p></blockquote><ul><li>ä½¿ç”¨å°„çº¿æ³•å¯¹ RTree ä¸­çš„å­çŸ©å½¢è¿›è¡Œè¿‡æ»¤ï¼Œå¿«é€Ÿåˆ¤æ–­ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…</li></ul><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/9db13b233f942d39434be2f9290acba5.png" alt="image.png"></p><blockquote><p>ğŸ’¡æŸ¥è¯¢æµç¨‹ï¼š</p><ul><li>é¦–å…ˆé€šè¿‡Ræ ‘è¿…é€Ÿåˆ¤æ–­ç”¨æˆ·æ‰€åœ¨ä½ç½®ï¼ˆç²—çº¢ç‚¹ï¼‰æ˜¯å¦è¢«å¤–åŒ…çŸ©å½¢è¦†ç›–ï¼ˆçº¢è‰²ç‚¹ä»£è¡¨ç”¨æˆ·æ‰€åœ¨ä½ç½®ï¼›Ræ ‘å¹³å‡æŸ¥è¯¢å¤æ‚åº¦ä¸ºO(Log(N))ï¼ŒNä¸ºå¤šè¾¹å½¢ä¸ªæ•°ï¼‰ï¼›</li><li>å¦‚æœä¸è¢«ä»»ä½•å¤–åŒ…çŸ©å½¢è¦†ç›–åˆ™è¿”å›ä¸åœ¨åœ°ç†å›´æ å¤šè¾¹å½¢å†…ï¼›</li><li>å¦‚æœè¢«å¤–åŒ…çŸ©å½¢è¦†ç›–åˆ™è¿˜éœ€è¦è¿›ä¸€æ­¥åˆ¤æ–­æ˜¯å¦åœ¨æ­¤å¤–åŒ…çŸ©å½¢çš„å¤šè¾¹å½¢å†…éƒ¨ï¼Œé‡‡ç”¨ä¸Šæ–‡æåˆ°çš„å°„çº¿æ³•åˆ¤æ–­ã€‚</li></ul></blockquote><h2 id="ç®—æ³•å®ç°-1"><a href="#ç®—æ³•å®ç°-1" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h2><ul><li><p>å¯¼å…¥mavenä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.davidmoten/rtree --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.davidmoten<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rtree<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.8.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ„å»ºRTree</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.github.davidmoten.rtree.Entry;</span><br><span class="line"><span class="keyword">import</span> com.github.davidmoten.rtree.RTree;</span><br><span class="line"><span class="keyword">import</span> com.github.davidmoten.rtree.geometry.Geometries;</span><br><span class="line"><span class="keyword">import</span> com.github.davidmoten.rtree.geometry.Rectangle;</span><br><span class="line"><span class="keyword">import</span> io.reactivex.Observable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolygonFence</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">// å¤šè¾¹å½¢IDæˆ–åç§°</span></span><br><span class="line">    <span class="keyword">private</span> String code; <span class="comment">// è¡Œæ”¿ç¼–ç </span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Point&gt; vertices; <span class="comment">// å¤šè¾¹å½¢çš„é¡¶ç‚¹åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">private</span> RTree&lt;Edge, Rectangle&gt; rTree; <span class="comment">// Ræ ‘ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">private</span> Rectangle boundingBox; <span class="comment">// å¤šè¾¹å½¢çš„æœ€å°å¤–åŒ…çŸ©å½¢</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PolygonFence</span><span class="params">(String name, String code, List&lt;Point&gt; vertices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.vertices = vertices;</span><br><span class="line">        <span class="keyword">this</span>.rTree = RTree.create();</span><br><span class="line">        initializeRTree(vertices);</span><br><span class="line">        calculateBoundingBox(vertices);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„å»ºrtreeç´¢å¼•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initializeRTree</span><span class="params">(List&lt;Point&gt; vertices)</span> </span>&#123;</span><br><span class="line">        List&lt;Edge&gt; edges = createEdgesFromVertices(vertices);</span><br><span class="line">        <span class="keyword">for</span> (Edge edge : edges) &#123;</span><br><span class="line">            Rectangle rectangle = Geometries.rectangle(</span><br><span class="line">                    Math.min(edge.x1, edge.x2), Math.min(edge.y1, edge.y2),</span><br><span class="line">                    Math.max(edge.x1, edge.x2), Math.max(edge.y1, edge.y2)</span><br><span class="line">            );</span><br><span class="line">            rTree = rTree.add(edge, rectangle);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è°ƒè¯•ä¿¡æ¯ï¼šæ‰“å°æ‰€æœ‰çš„è¾¹</span></span><br><span class="line">        System.out.println(<span class="string">&quot;All edges added to RTree:&quot;</span>);</span><br><span class="line">        edges.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ„å»º mbr</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">calculateBoundingBox</span><span class="params">(List&lt;Point&gt; vertices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> minX = Double.MAX_VALUE, minY = Double.MAX_VALUE;</span><br><span class="line">        <span class="keyword">double</span> maxX = Double.MIN_VALUE, maxY = Double.MIN_VALUE;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Point vertex : vertices) &#123;</span><br><span class="line">            <span class="keyword">if</span> (vertex.getLon() &lt; minX) minX = vertex.getLon();</span><br><span class="line">            <span class="keyword">if</span> (vertex.getLat() &lt; minY) minY = vertex.getLat();</span><br><span class="line">            <span class="keyword">if</span> (vertex.getLon() &gt; maxX) maxX = vertex.getLon();</span><br><span class="line">            <span class="keyword">if</span> (vertex.getLat() &gt; maxY) maxY = vertex.getLat();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        boundingBox = Geometries.rectangle(minX, minY, maxX, maxY);</span><br><span class="line">        System.out.println(<span class="string">&quot;Bounding Box: &quot;</span> + boundingBox);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isInside</span><span class="params">(Point p)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å…ˆåˆ¤æ–­ç‚¹æ˜¯å¦åœ¨æœ€å°å¤–åŒ…çŸ©å½¢å†…</span></span><br><span class="line">        <span class="keyword">if</span> (!boundingBox.contains(p.getLon(), p.getLat())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸ºäº†è·å–å¯èƒ½ç›¸äº¤çš„è¾¹ï¼Œå°†æŸ¥è¯¢çŸ©å½¢æ‰©å¤§ä¸€å®šçš„èŒƒå›´</span></span><br><span class="line">        Rectangle searchRect = Geometries.rectangle(Geometries.point(p.getLon(),p.getLat()));</span><br><span class="line">        Integet count = rTree.search(searchRect).map(Entry::value)</span><br><span class="line">                <span class="comment">// ç²—ç­›åä½¿ç”¨åå°„æ³•</span></span><br><span class="line">                .map(fence -&gt; isRayIntersectsSegment(p.getLat(), p.getLon(), fence))</span><br><span class="line">                .count().toBlocking();</span><br><span class="line">        <span class="keyword">return</span> (count % <span class="number">2</span>) == <span class="number">1</span>; <span class="comment">// å¥‡æ•°è¡¨ç¤ºåœ¨å¤šè¾¹å½¢å†…</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;Edge&gt; <span class="title">createEdgesFromVertices</span><span class="params">(List&lt;Point&gt; vertices)</span> </span>&#123;</span><br><span class="line">        List&lt;Edge&gt; edges = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vertices.size(); i++) &#123;</span><br><span class="line">            Point start = vertices.get(i);</span><br><span class="line">            Point end = vertices.get((i + <span class="number">1</span>) % vertices.size());</span><br><span class="line">            edges.add(<span class="keyword">new</span> Edge(start.getLon(), start.getLat(), end.getLon(), end.getLat()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> edges;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isRayIntersectsSegment</span><span class="params">(<span class="keyword">double</span> lat, <span class="keyword">double</span> lon, Edge edge)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> x1 = edge.x1;</span><br><span class="line">        <span class="keyword">double</span> y1 = edge.y1;</span><br><span class="line">        <span class="keyword">double</span> x2 = edge.x2;</span><br><span class="line">        <span class="keyword">double</span> y2 = edge.y2;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;Checking intersection with edge: &quot;</span> + edge);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¾¹å¹³è¡Œäºxè½´ï¼Œä¸ç›¸äº¤</span></span><br><span class="line">        <span class="keyword">if</span> (y1 == y2) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç‚¹åœ¨è¾¹çš„ä¸Šæ–¹æˆ–ä¸‹æ–¹ï¼Œä¸ç›¸äº¤</span></span><br><span class="line">        <span class="keyword">if</span> (y1 &gt; lat &amp;&amp; y2 &gt; lat) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (y1 &lt; lat &amp;&amp; y2 &lt; lat) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç‚¹åœ¨è¾¹çš„ä¸Šæ–¹ï¼ˆå†—ä½™æ£€æŸ¥ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (Math.max(y1, y2) &lt; lat) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¡ç®—äº¤ç‚¹</span></span><br><span class="line">        <span class="keyword">double</span> xIntersect = x1 + (lat - y1) * (x2 - x1) / (y2 - y1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ£€æŸ¥æ˜¯å¦ç›¸äº¤ (åŒ…æ‹¬ç­‰äºçš„æƒ…å†µ)</span></span><br><span class="line">        <span class="keyword">boolean</span> intersects = xIntersect &gt;= lon;</span><br><span class="line">        System.out.println(<span class="string">&quot;xIntersect: &quot;</span> + xIntersect + <span class="string">&quot;, lon: &quot;</span> + lon + <span class="string">&quot;, intersects: &quot;</span> + intersects);</span><br><span class="line">        <span class="keyword">return</span> intersects;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>Q:å¤§å¤šæ•°åº”ç”¨çš„åœ°ç†å›´æ å¤šè¾¹å½¢éƒ½æ¯”è¾ƒç®€å•ï¼Œä½†æœ‰æ—¶ä¹Ÿä¼šé‡åˆ°ä¸€äº›ç‰¹åˆ«å¤æ‚çš„å¤šè¾¹å½¢ï¼Œæ¯”å¦‚å•ä¸ªå¤šè¾¹å½¢çš„è¾¹æ•°å°±è¶…è¿‡åå‡ ä¸‡æ¡ï¼Œè¿™æ—¶å€™å¯¹æ­¤å¤æ‚å¤šè¾¹å½¢æ‰§è¡Œä¸€æ¬¡å°„çº¿æ³•ä¹Ÿéå¸¸è€—æ—¶ï¼ˆå› ä¸ºå°„çº¿æ³•æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼ŒNä¸ºå¤šè¾¹å½¢è¾¹æ•°ï¼‰ï¼Œè¿™ç§æ€ä¹ˆå¤„ç†ã€‚<br>A:é¦–å…ˆå¯¹å¤šè¾¹å½¢çš„æ¯æ¡è¾¹æ„å»ºæœ€å°å¤–åŒ…çŸ©å½¢ï¼Œç„¶ååœ¨è¿™äº›æœ€å°å¤–åŒ…çŸ©å½¢åŸºç¡€ä¸Šæ„å»ºRæ ‘ç´¢å¼•ï¼ˆRæ ‘ç´¢å¼•ä¸Šçš„å¤–åŒ…çŸ©å½¢æœªç”»å‡ºï¼‰ï¼Œè¿™æ ·å°„çº¿æ³•æ±‚äº¤ç‚¹çš„æ—¶å€™é¦–å…ˆé€šè¿‡Ræ ‘åˆ¤æ–­å°„çº¿æ˜¯å¦ä¸å¤–åŒ…çŸ©å½¢ç›¸äº¤ï¼Œæœ€åå¯¹Ræ ‘ç²—ç­›åçš„è¾¹è¿›è¡Œç²¾ç¡®æ±‚äº¤åˆ¤æ–­ï¼Œæ—¶é—´å¤æ‚åº¦ä»O(N)é™åˆ°O(Log(N))ï¼Œå¤§å¤§æé«˜äº†è®¡ç®—æ•ˆç‡ã€‚<br><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/4aa68eed4e1598f9eeaa90643cbc9a42.png" alt="image.png"></p></blockquote><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åŸºäºRTree å®ç°ç©ºé—´æ•°æ®çš„ç´¢å¼•ï¼Œç»“åˆå°„çº¿æ³•è¿›è¡Œç»†ç²’åº¦åˆ¤æ–­ï¼Œå³å¯ä»¥å¤§å¹…æå‡æŸ¥è¯¢æ•ˆç‡ï¼Œä¹Ÿä¿è¯äº†ç®—æ³•çš„å‡†ç¡®æ€§ï¼Œæå…¶é€‚ç”¨äºå¤§è§„æ¨¡ç©ºé—´æ•°æ®çš„ç®¡ç†å’ŒæŸ¥è¯¢ã€‚ä½†ä¹Ÿå­˜åœ¨ä¸€äº›å¼Šç«¯ï¼š</p><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>RTree ç»“æ„å’Œå°„çº¿æ³•ç»“åˆå®ç°èµ·æ¥ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦å¤„ç†å¤šç§è¾¹ç•Œæƒ…å†µï¼Œå¯¼è‡´å¤æ‚æ€§è¾ƒå¤§ã€‚</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>RTree éœ€è¦å­˜å‚¨å¤§é‡çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œå¯¹äºå¤§è§„æ¨¡æ•°æ®å¯èƒ½å¸¦æ¥è¾ƒå¤§çš„å­˜å‚¨å¼€é”€</p></div><div class="flink"><div class="flink-name">å‚è€ƒæ–‡çŒ®</div> <div class="flink-list">          <div class="flink-list-item">            <a href="https://blog.csdn.net/Form_/article/details/77841534" title="CSDN" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://profile-avatar.csdnimg.cn/c688290fc5284c508133873dd2cd7810_form_.jpg!1" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="CSDN" />              </div>              <div class="flink-item-name">CSDN</div>               <div class="flink-item-desc" title="å°„çº¿æ³•-åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…éƒ¨">å°„çº¿æ³•-åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…éƒ¨</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://www.cnblogs.com/LBSer/p/4471742.html" title="åšå®¢å›­" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://pic.cnblogs.com/avatar/522490/20150808185035.png" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="åšå®¢å›­" />              </div>              <div class="flink-item-name">åšå®¢å›­</div>               <div class="flink-item-desc" title="åœ°ç†å›´æ ç®—æ³•è§£æ">åœ°ç†å›´æ ç®—æ³•è§£æ</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://zhuanlan.zhihu.com/p/691639641" title="çŸ¥ä¹" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://picx.zhimg.com/v2-ae79aac0cc200ac018cb4179b232c9cc_l.jpg?source=172ae18b" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="çŸ¥ä¹" />              </div>              <div class="flink-item-name">çŸ¥ä¹</div>               <div class="flink-item-desc" title="æ•°æ®ç»“æ„ä¹‹R Tree">æ•°æ®ç»“æ„ä¹‹R Tree</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://blog.csdn.net/BXD1314/article/details/122145894" title="CSDN" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://profile-avatar.csdnimg.cn/74f75e8f0a6c4444a00df59a42ee928a_bxd1314.jpg!1" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="CSDN" />              </div>              <div class="flink-item-name">CSDN</div>               <div class="flink-item-desc" title="å›è½¬æ•°æ³•-åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…éƒ¨">å›è½¬æ•°æ³•-åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…éƒ¨</div>            </a>          </div></div></div>]]></content>
    
    
    <summary type="html">åœ¨è½¦è”ç½‘åœºæ™¯ä¸‹ï¼Œéœ€è¦ç”¨åˆ°å¤§é‡çš„åŸºäºç»çº¬åº¦çš„ç”µå­å›´æ ï¼Œç‰¹åˆ«æ˜¯å¤šè¾¹å½¢å›´æ ï¼ŒåŸºæœ¬ä¸Šè´¯ç©¿è½¦è¾†ç›‘æ§å’Œç®¡ç†çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå› æ­¤ä½¿ç”¨å°„çº¿æ³•åŠ ä¸ŠRTreeç®—æ³•ç²—ç­›æˆä¸ºé«˜æ•ˆåˆ¤æ–­æ˜¯å¦åœ¨å›´æ çš„é‡è¦æ–¹å¼ã€‚</summary>
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="https://blog.gladium.cn/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="ç®—æ³•" scheme="https://blog.gladium.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="ç”µå­å›´æ " scheme="https://blog.gladium.cn/tags/%E7%94%B5%E5%AD%90%E5%9B%B4%E6%A0%8F/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºæ ˆå®ç°ç®—æœ¯è¡¨è¾¾å¼çš„è§£æä¸è¿ç®—</title>
    <link href="https://blog.gladium.cn/f4ef.html"/>
    <id>https://blog.gladium.cn/f4ef.html</id>
    <published>2022-10-20T00:00:00.000Z</published>
    <updated>2024-05-19T08:16:30.356Z</updated>
    
    <content type="html"><![CDATA[<p>ç®—æœ¯è¡¨è¾¾å¼ä½œä¸ºæœ€å¸¸ç”¨çš„é€»è¾‘è¿ç®—çš„å†™ä½œæ–¹å¼ï¼Œæ˜¯ä¸€ç§æ˜“ç”¨ï¼Œæ˜“ç†è§£çš„è§„åˆ™å’Œæ•°æ®çš„ç»„åˆä½“ã€‚è¿™ç§ç»„åˆä½“å¯¹äºäººæ¥è¯´ï¼Œç†è§£å…¶ä¸­çš„è§„åˆ™ï¼Œæ—¢å¯ä»¥å¿«é€Ÿè®¡ç®—å‡ºç»“æœï¼Œä½†æ˜¯åœ¨ä»£ç ä¸­ï¼Œä¸åŒæ“ä½œç¬¦çš„ä¼˜å…ˆçº§ä½¿å¾—å¯¹äºç®—æœ¯çš„å­—ç¬¦è¯»å–æ— æ³•æŒ‰ç…§å¸¸è§„çš„é€è¡Œé€å¥è¯»å–ï¼Œéœ€è¦åœ¨è¯»å–çš„åŒæ—¶ï¼Œç»“åˆä¸Šä¸‹æ–‡æ¥åŠ¨æ€çš„åˆ¤æ–­ä¼˜å…ˆçº§ï¼Œå¹¶è¿›è¡Œæ‰“æ ‡æ¥å¤„ç†ï¼Œè¿™ç§æ–¹å¼ä¼šå¯¼è‡´é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œè·¨å­—ç¬¦è¯»å–ï¼Œä¸¥é‡æ‹–æ…¢æ‰§è¡Œæ•°æ®ã€‚åŸºäºæ­¤ï¼Œå¯ä»¥é‡‡ç”¨åç¼€è¡¨è¾¾æ³•æ¥é¢„å¤„ç†ç®—æœ¯è¡¨è¾¾å¼ã€‚</p><h1 id="åç¼€è¡¨è¾¾å¼è½¬æ¢"><a href="#åç¼€è¡¨è¾¾å¼è½¬æ¢" class="headerlink" title="åç¼€è¡¨è¾¾å¼è½¬æ¢"></a>åç¼€è¡¨è¾¾å¼è½¬æ¢</h1><h2 id="ç®—å¼åˆ†è§£"><a href="#ç®—å¼åˆ†è§£" class="headerlink" title="ç®—å¼åˆ†è§£"></a>ç®—å¼åˆ†è§£</h2><p>å¯¹äºä¸€èˆ¬ç®—å¼æ¥è¯´ï¼Œå…¶ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸º æ“ä½œç¬¦ï¼Œæ“ä½œæ•°ï¼Œæ“ä½œå€¼ï¼Œå…¶ä¸­ï¼š</p><ul><li>æ“ä½œæ•°ï¼šå³ä¸ºç®—å¼ä¸­çš„éœ€è¦è®¡ç®—çš„æ•°ï¼Œå¯ä»¥ä¸ºä¹˜æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ºé™¤æ•°ç­‰ï¼Œä¸€åˆ‡ç”±åç»­çš„æ“ä½œç¬¦æ¥å®šä¹‰ã€‚</li><li>æ“ä½œç¬¦ï¼šå³ä¸ºç®—å¼ä¸­çš„è®¡ç®—æ ‡è¯†ï¼Œæ ‡è¯†æ“ä½œæ•°æŒ‰ç…§ä½•ç§æ–¹å¼è¿›è¡Œç»„åˆï¼ŒåŒæ—¶ä¹Ÿå®šä¹‰æ“ä½œçš„ä¼˜å…ˆçº§ã€‚</li><li>æ“ä½œå€¼ï¼šå³ä¸ºç®—å¼ä¸­è®¡ç®—çš„ç»“æœå€¼ï¼Œä½œä¸ºæ“ä½œæ•°åœ¨æ“ä½œç¬¦ä¸åŒè§„åˆ™ä¸‹ç»„åˆçš„äº§ç‰©ã€‚<blockquote><p>tipsï¼šåœ¨å¤šçº§è¿ç®—ä¸­ï¼Œæœ‰æ—¶å€™æ“ä½œå€¼ä¹Ÿä¼šè½¬æ¢ä¸ºæ“ä½œæ•°ï¼Œç»§ç»­å‚ä¸æ¥ä¸‹æ¥çš„è¿ç®—ã€‚ </p></blockquote></li></ul><h2 id="åç¼€è¡¨è¾¾å¼è¯´æ˜"><a href="#åç¼€è¡¨è¾¾å¼è¯´æ˜" class="headerlink" title="åç¼€è¡¨è¾¾å¼è¯´æ˜"></a>åç¼€è¡¨è¾¾å¼è¯´æ˜</h2><p>åœ¨è¯´åç¼€è¡¨è¾¾å¼ä¹‹å‰ï¼Œå¯ä»¥å…ˆç†è§£ä¸‹ä¸­ç¼€è¡¨è¾¾å¼ï¼›</p><ul><li>ä¸­ç¼€è¡¨è¾¾å¼ï¼šå³æˆ‘ä»¬æ—¥å¸¸çœ‹åˆ°çš„ç®—æ³•æ¨¡å¼ï¼Œå½¢å¦‚  <code>a * (b + c)</code> è¿™ç§æ¨¡å¼ï¼Œæ‰€æœ‰çš„ç¬¦å·æŒ‰ç…§æ‰§è¡Œé¡ºåºè¿›è¡Œæ’åˆ—ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ˜ç™½å…¶ä¸­çš„è§„åˆ™å¹¶è¿›è¡Œè®¡ç®—ã€‚</li><li>åç¼€è¡¨è¾¾å¼ï¼šå³å°†ä¸­ç¼€è¡¨è¾¾çš„æ ¼å¼æŒ‰ç…§å®é™…è®¡ç®—çš„ä¼˜å…ˆçº§ï¼Œå°†æ“ä½œç¬¦è¿›è¡Œåç½®æ’åˆ—ï¼Œä¾‹å¦‚ <code>abc+* </code>è¿™ç§æ¨¡å¼ï¼Œå®Œå…¨æ’é™¤æ‹¬å·å¯¹è®¡ç®—ä¼˜å…ˆçº§çš„å¤„ç†ï¼Œå¯ä»¥æ»¡è¶³è®¡ç®—ä¸­<strong>é€å¥è¯»å–ï¼Œé€å¥è§£æï¼Œé€å¥è®¡ç®—</strong>çš„è¦æ±‚ã€‚</li></ul><p>åœ¨ç†è§£åç¼€è¡¨è¾¾å¼ä¹‹åï¼Œå°±å¯ä»¥å‘ç°è¿™ç§è¡¨è¾¾æ–¹å¼åœ¨è®¡ç®—æœºå¤„ç†ä¸­çš„é«˜æ•ˆä¹‹å¤„ï¼Œä»¥åŠå…¶è®¾è®¡çš„å·§å¦™ï¼Œåˆç†çš„è§£å†³äº†æ‹¬å·å¸¦æ¥çš„ä¼˜å…ˆçº§è·³è·ƒçš„é—®é¢˜å’Œä¾èµ–ä¸Šä¸‹æ–‡å¤„ç†çš„æ€§èƒ½æŸè€—é—®é¢˜ã€‚ä»¥ä¸‹æœ‰éƒ¨åˆ†ä¸­ç¼€å’Œåç¼€è¡¨è¾¾å¼çš„å¯¹æ¯”ï¼Œå¯ä»¥å…ˆä½“ä¼šä¸‹å…¶ä¸­çš„è®¾è®¡æ€è·¯ï¼š</p><table><thead><tr><th><strong>ä¸­ç¼€è¡¨è¾¾å¼</strong></th><th><strong>åç¼€è¡¨è¾¾å¼</strong></th></tr></thead><tbody><tr><td>A+B-C</td><td>AB+C-</td></tr><tr><td>A*B/C</td><td>AB*C/</td></tr><tr><td>A+B*C</td><td>ABC*+</td></tr><tr><td>A*B+C</td><td>AB*C+</td></tr><tr><td>A*(B+C)</td><td>ABC+*</td></tr><tr><td>A_B+C_D</td><td>AB_CD_+</td></tr><tr><td>(A+B)*(C-D)</td><td>AB+CD-*</td></tr><tr><td>((A+B)*C)-D</td><td>AB+C*D-</td></tr><tr><td>A+B*(C-D/(E+F))</td><td>ABCDEF+/-*+</td></tr></tbody></table><h2 id="è½¬æ¢è§„åˆ™"><a href="#è½¬æ¢è§„åˆ™" class="headerlink" title="è½¬æ¢è§„åˆ™"></a>è½¬æ¢è§„åˆ™</h2><p>é’ˆå¯¹ä¸åŒçš„ç®—å¼è¡¨è¾¾å¼ï¼Œåœ¨ä»ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼æ—¶ï¼Œéœ€è¦éµå¾ªä¸€ä¸‹è§„åˆ™ï¼š</p><ul><li>æ‰€æœ‰çš„æ“ä½œæ•°æŒ‰ç…§é¡ºåºè¿›è¡Œæ’åˆ—ï¼ˆä¸æ”¹å˜ä¸­ç¼€ç®—å¼çš„æ“ä½œæ•°æ’åˆ—è§„åˆ™ï¼‰</li><li>é‡åˆ°æ“ä½œç¬¦æ—¶ï¼Œå¦‚æœå¯ä»¥ç›´æ¥è¿›è¡Œè¿ç®—çš„ï¼Œåˆ™å°†æ“ä½œç¬¦å¤åˆ¶åˆ°ä¸¤ä¸ªæ“ä½œæ•°åé¢</li><li>é‡åˆ°æ‹¬å·è¿™ç§èƒ½å¤Ÿæå‡ä¼˜å…ˆçº§çš„æ“ä½œç¬¦ï¼Œéœ€è¦å°†å½“å‰æ“ä½œç¬¦å…ˆæç½®ï¼Œå¾…åˆ°åç»­ä¼˜å…ˆçº§å‡çº§çš„ç®—å¼æ“ä½œè½¬æ¢å®Œæˆåï¼Œå†å°†å½“å‰æ“ä½œç¬¦å¤åˆ¶åˆ°åé¢ã€‚</li></ul><h2 id="è½¬æ¢å®ä¾‹"><a href="#è½¬æ¢å®ä¾‹" class="headerlink" title="è½¬æ¢å®ä¾‹"></a>è½¬æ¢å®ä¾‹</h2><p>ä¸‹é¢æ¥çœ‹å‡ ä¸ªç®€å•çš„ç®—å¼çš„è½¬æ¢è¿‡ç¨‹</p><h4 id="ç¬¬ä¸€ä¸ªæ˜¯-A-B-C-çš„è½¬æ¢æ–¹å¼"><a href="#ç¬¬ä¸€ä¸ªæ˜¯-A-B-C-çš„è½¬æ¢æ–¹å¼" class="headerlink" title="ç¬¬ä¸€ä¸ªæ˜¯ A + B -C çš„è½¬æ¢æ–¹å¼"></a>ç¬¬ä¸€ä¸ªæ˜¯ <code>A + B -C</code> çš„è½¬æ¢æ–¹å¼</h4><table><thead><tr><th><strong>ä»ä¸­ç¼€å­—ç¬¦ä¸²ä¸­è¯»å–å­—ç¬¦ä¸²</strong></th><th><strong>åˆ†è§£ä¸­ç¼€è¡¨è¾¾å¼è¿‡ç¨‹</strong></th><th><strong>æ±‚åç¼€è¡¨è¾¾å¼è¿‡ç¨‹</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>A</td><td>A</td><td>A</td><td></td></tr><tr><td>+</td><td>A+</td><td>A</td><td>è¯»åˆ°+ï¼Œæ— æ³•è¿ç®— æç½®</td></tr><tr><td>B</td><td>A+B</td><td>AB</td><td></td></tr><tr><td>-</td><td>A+B-</td><td>AB+</td><td>è¯»åˆ°-ï¼Œå¯ä»¥è¿ç®—ï¼Œåˆ™å¯ä»¥æŠŠ+å¤åˆ¶åˆ°åç¼€å­—ç¬¦ä¸²ä¸­</td></tr><tr><td>C</td><td>A+B-C</td><td>AB+C</td><td></td></tr><tr><td>END</td><td>A+B-C</td><td>AB+C-</td><td>å½“è¯»åˆ°è¡¨è¾¾å¼ç»“å°¾å¤„ï¼Œå¯ä»¥å¤åˆ¶-</td></tr></tbody></table><h4 id="ç¬¬äºŒä¸ªæ˜¯-A-B-C-çš„è½¬æ¢æ–¹å¼"><a href="#ç¬¬äºŒä¸ªæ˜¯-A-B-C-çš„è½¬æ¢æ–¹å¼" class="headerlink" title="ç¬¬äºŒä¸ªæ˜¯ A + B * C çš„è½¬æ¢æ–¹å¼"></a>ç¬¬äºŒä¸ªæ˜¯ <code>A + B * C</code> çš„è½¬æ¢æ–¹å¼</h4><table><thead><tr><th><strong>ä»ä¸­ç¼€è¡¨è¾¾å¼ä¸­è¯»å–å­—ç¬¦ä¸²</strong></th><th><strong>åˆ†è§£ä¸­ç¼€è¡¨è¾¾å¼è¿‡ç¨‹</strong></th><th><strong>æ±‚åç¼€è¡¨è¾¾å¼è¿‡ç¨‹</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>A</td><td>A</td><td>A</td><td></td></tr><tr><td>+</td><td>A+</td><td>A</td><td>è¯»åˆ°+ï¼Œæ— æ³•è¿ç®— æç½®</td></tr><tr><td>B</td><td>A+B</td><td>AB</td><td></td></tr><tr><td>*</td><td>A+B*</td><td>AB</td><td>è¯»åˆ°*ï¼Œæ— æ³•è¿ç®— æç½®</td></tr><tr><td>C</td><td>A+B*C</td><td>ABC</td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td>A+B*C</td><td>ABC*</td><td>çœ‹åˆ°C,å¯è¿ç®—åå¯ä»¥å¤åˆ¶*</td></tr><tr><td>END</td><td>A+B*C</td><td>ABC*+</td><td>çœ‹åˆ°è¡¨è¾¾å¼æœ«ç«¯æ—¶ï¼Œå¯ä»¥å¤åˆ¶+</td></tr></tbody></table><h4 id="ç¬¬ä¸‰ä¸ªæ˜¯-A-B-C-çš„è½¬æ¢æ–¹å¼"><a href="#ç¬¬ä¸‰ä¸ªæ˜¯-A-B-C-çš„è½¬æ¢æ–¹å¼" class="headerlink" title="ç¬¬ä¸‰ä¸ªæ˜¯ A * ( B + C ) çš„è½¬æ¢æ–¹å¼"></a>ç¬¬ä¸‰ä¸ªæ˜¯ <code>A * ( B + C )</code> çš„è½¬æ¢æ–¹å¼</h4><table><thead><tr><th><strong>ä»ä¸­ç¼€è¡¨è¾¾å¼ä¸­è¯»å–å­—ç¬¦ä¸²</strong></th><th><strong>åˆ†è§£ä¸­ç¼€è¡¨è¾¾å¼è¿‡ç¨‹</strong></th><th><strong>æ±‚åç¼€è¡¨è¾¾å¼è¿‡ç¨‹</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>A</td><td>A</td><td>A</td><td></td></tr><tr><td>*</td><td>A*</td><td>A</td><td>è¯»åˆ°*ï¼Œæ— æ³•è¿ç®— æç½®</td></tr><tr><td>(</td><td>A*(</td><td>A</td><td>è¯»åˆ°(ï¼Œä¸èƒ½å¤åˆ¶</td></tr><tr><td>B</td><td>A*(B</td><td>AB</td><td></td></tr><tr><td></td><td>A*(B+</td><td>AB</td><td></td></tr><tr><td>+</td><td>A*(B+C</td><td>ABC</td><td>ä¸èƒ½å¤åˆ¶+</td></tr><tr><td>C</td><td>A*(B+C)</td><td>ABC+</td><td>çœ‹åˆ°ï¼‰æ—¶ï¼Œå¯ä»¥è¿ç®—ï¼Œå¯ä»¥å¤åˆ¶+</td></tr><tr><td>)</td><td>A*(B+C)</td><td>ABC+*</td><td></td></tr><tr><td>END</td><td>A*(B+C)</td><td>ABC+*</td><td>çœ‹åˆ°è¡¨è¾¾å¼æœ«ç«¯æ—¶ï¼Œå¯ä»¥å¤åˆ¶*</td></tr></tbody></table><h2 id="ç®—æ³•è®¾è®¡æ€è·¯"><a href="#ç®—æ³•è®¾è®¡æ€è·¯" class="headerlink" title="ç®—æ³•è®¾è®¡æ€è·¯"></a>ç®—æ³•è®¾è®¡æ€è·¯</h2><p>é€šè¿‡ä»¥ä¸Šç®€å•åº”ç”¨çš„è½¬æ¢ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ“ä½œæ•°çš„æ’åˆ—æ˜¯ä¸ç”¨æ”¹å˜çš„ï¼Œåªæœ‰æ“ä½œç¬¦æ˜¯å‘ç”Ÿäº†é¡ºåºçš„å˜åŒ–ï¼ŒåŒæ—¶æ“ä½œç¬¦ä¹Ÿéœ€è¦å—åˆ°ä¼˜å…ˆçº§é«˜ä½çš„å½±å“ï¼Œå› æ­¤åœ¨è½¬æ¢è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æ ˆè¿™ä¸ªç»“æ„ï¼Œå°†æ¯ä¸€ä¸ªæ“ä½œç¬¦ä¸å‰ä¸€ä¸ªå¯¹æ¯”ï¼Œæ ¹æ®ä¼˜å…ˆçº§é«˜ä½ï¼Œæ¥å¤„ç†æ“ä½œç¬¦å…¥åº“æˆ–è€…æ˜¯å¤åˆ¶çš„æ“ä½œã€‚</p><blockquote><p>tips: ç‰¹åˆ«ï¼Œåœ¨è½¬æ¢çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç° æ•°å€¼çš„é¡ºåºçš„é¢ å€’ï¼Œä¾‹å¦‚ A/B ï¼Œä¼šå˜ä¸º AB/ ï¼Œåœ¨æ ˆçš„ç»“æœä¸­ï¼Œåœ¨è®¡ç®—çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„å‡æ³•å’Œé™¤æ³•çš„å€¼çš„ä½¿ç”¨é—®é¢˜ã€‚</p></blockquote><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/c8411d033adedd0bc35f56d218bf99f9.jpeg" alt="yuque_diagram.jpg"></p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** åœ¨åšåç¼€è§£æçš„è¿‡ç¨‹ä¸­ï¼Œä¿å­˜æ“ä½œç¬¦ */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Stack&lt;String&gt; SYMBOL_STACK = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line"><span class="comment">/** è¡¨æ˜ç¬¦å·åˆ—è¡¨ */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;String&gt; DEFAULT_SYMBOL_LIST = Lists.newArrayList(<span class="string">&quot;+&quot;</span>,<span class="string">&quot;-&quot;</span>,<span class="string">&quot;*&quot;</span>,<span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String LEFT_BRACKET = <span class="string">&quot;(&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String RIGHT_BRACKET = <span class="string">&quot;)&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">convert</span><span class="params">(String opt)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(opt == <span class="keyword">null</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ•°æ®ç±»å‹</span></span><br><span class="line">    <span class="keyword">if</span>(DEFAULT_SYMBOL_LIST.contains(opt))&#123;</span><br><span class="line">        <span class="comment">// å½“opt ä¸º æ“ä½œç¬¦æ—¶</span></span><br><span class="line">        <span class="comment">// å¦‚æœæ ˆä¸ºç©ºï¼Œåˆ™ç›´æ¥å°†å½“å‰æ“ä½œç¬¦å…¥åº“</span></span><br><span class="line">        <span class="keyword">if</span>(SYMBOL_STACK.isEmpty())&#123;</span><br><span class="line">            SYMBOL_STACK.push(opt);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        String pop = SYMBOL_STACK.pop();</span><br><span class="line">        <span class="comment">// å¦‚æœ å–å‡ºçš„ pop å³ä¹‹å‰çš„æ“ä½œç¬¦ ä¼˜å…ˆçº§é«˜äº å½“å‰opt åˆ™è¡¨ç¤ºå½“å‰æ“ä½œæ•°å¯ä»¥è¿ç®—ï¼Œåˆ™å¤åˆ¶å–å‡ºçš„æ“ä½œç¬¦</span></span><br><span class="line">        <span class="comment">// åŒæ—¶å°†å½“å‰æ“ä½œç¬¦å…¥æ ˆ</span></span><br><span class="line">        <span class="keyword">if</span>(isMax(pop,opt))&#123;</span><br><span class="line">            SYMBOL_STACK.push(opt);</span><br><span class="line">            <span class="keyword">return</span> pop;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// å¦‚æœ å–å‡ºçš„pop ä¼˜å…ˆçº§ä½äº å½“å‰æ“ä½œç¬¦ï¼Œè¯´æ˜å½“å‰ ç»“æœä¸å¯è¿ç®— ï¼Œåˆ™ å°†å–å‡ºçš„pop å’Œå½“å‰ optå‡å…¥æ ˆ</span></span><br><span class="line">            SYMBOL_STACK.push(pop);</span><br><span class="line">            SYMBOL_STACK.push(opt);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(LEFT_BRACKET.equals(opt) || RIGHT_BRACKET.equals(opt))&#123;</span><br><span class="line">        <span class="comment">// å½“opt ä¸º å·¦å³æ‹¬å·æ—¶</span></span><br><span class="line">        <span class="keyword">if</span>(LEFT_BRACKET.equals(opt))&#123;</span><br><span class="line">            <span class="comment">// å·¦æ‹¬å· ï¼Œåˆ™ å½“å‰æ— æ³•è®¡ç®— åˆ™ç›´æ¥å°†ç¬¦å·å…¥æ ˆå³å¯</span></span><br><span class="line">            SYMBOL_STACK.push(opt);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å³æ‹¬å· å³å½“å‰æ•°æ®å¯ä»¥è®¡ç®— ï¼Œå–å‡º ) ä¹‹é—´æ‰€æœ‰å…¥æ ˆçš„ æ“ä½œç¬¦å‡å–æ ˆé¡¶å¤åˆ¶åˆ°åé¢</span></span><br><span class="line">            StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            <span class="keyword">while</span> (!SYMBOL_STACK.isEmpty())&#123;</span><br><span class="line">                String pop = SYMBOL_STACK.pop();</span><br><span class="line">                <span class="comment">// æˆªæ­¢åˆ° ( ä¹‹å‰çš„æ“ä½œç¬¦ï¼Œä¸»è¦æ˜¯è§£å†³åœ¨å¤šé‡ (( çš„æƒ…å†µä¸‹ï¼Œåªå¤åˆ¶å½“å‰ ( ) ç»“æ„å†…çš„æ“ä½œç¬¦</span></span><br><span class="line">                <span class="keyword">if</span>(pop.equals(LEFT_BRACKET))&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                sb.append(pop);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sb.toString();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// æ“ä½œæ•° ç›´æ¥æŒ‰ç…§é¡ºåºè¾“å‡ºå³å¯</span></span><br><span class="line">        <span class="keyword">return</span> opt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: åˆ¤æ–­æ“ä½œç¬¦çš„ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: Create in 2022/10/20 16:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isMax</span><span class="params">(String max,String min)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SymbolEnum.getLevel(max) &gt;= SymbolEnum.getLevel(min);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç®—å¼è®¡ç®—"><a href="#ç®—å¼è®¡ç®—" class="headerlink" title="ç®—å¼è®¡ç®—"></a>ç®—å¼è®¡ç®—</h1><p>åœ¨å°†ç®—å¼ä»ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼ä¹‹åï¼Œå†æƒ³è¿›è¡Œè®¡ç®—å°±åŠå…¶çš„ç®€å•äº†ã€‚åªéœ€è¦å°†æ“ä½œæ•°ä¸æ–­çš„å…¥æ ˆï¼Œç„¶åé‡åˆ°æ“ä½œç¬¦ä¹‹åï¼Œä»æ ˆä¸­å–å‡ºä¸¤ä¸ªæ•°ï¼Œè¿›è¡Œè®¡ç®—ï¼Œç„¶åå°†æ“ä½œå€¼å†å…¥æ ˆæˆä¸ºæ“ä½œæ•°ï¼Œç›´åˆ°ç»“æŸã€‚ä»¥ä¸‹ç›´æ¥å±•ç¤ºä»£ç å®ç°ã€‚</p><ul><li><p>ä¸åŒç¬¦å·è®¡ç®—çš„æšä¸¾ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">SymbolEnum</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ADD(<span class="number">1</span>,<span class="string">&quot;+&quot;</span>)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a+b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    SUB(<span class="number">1</span>,<span class="string">&quot;-&quot;</span>) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a-b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    MUL(<span class="number">2</span>,<span class="string">&quot;*&quot;</span>) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a*b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    DIV(<span class="number">2</span>,<span class="string">&quot;/&quot;</span>) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a/b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    LEFT(<span class="number">0</span>,<span class="string">&quot;(&quot;</span>) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    RIGHT(<span class="number">0</span>,<span class="string">&quot;)&quot;</span>) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    ;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> level;</span><br><span class="line">    <span class="keyword">private</span> String symbol;</span><br><span class="line">    SymbolEnum(<span class="keyword">int</span> level, String symbol) &#123;</span><br><span class="line">        <span class="keyword">this</span>.level = level;</span><br><span class="line">        <span class="keyword">this</span>.symbol = symbol;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸åŒç¬¦å·å®ç°çš„æŠ½è±¡æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹ä¸åŒæ“ä½œç¬¦è¿›è¡Œæ•°æ®è¿ç®—</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, String symbol)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (SymbolEnum value : SymbolEnum.values()) &#123;</span><br><span class="line">            <span class="keyword">if</span>(value.symbol.equals(symbol))&#123;</span><br><span class="line">                <span class="keyword">return</span> value.calculate(a,b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–ç¬¦å·çš„ä¼˜å…ˆçº§</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getLevel</span><span class="params">(String symbol)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (SymbolEnum value : SymbolEnum.values()) &#123;</span><br><span class="line">            <span class="keyword">if</span>(value.symbol.equals(symbol))&#123;</span><br><span class="line">                <span class="keyword">return</span> value.level;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è®¡ç®—ç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** åœ¨è®¡ç®—ç»“æœçš„æ—¶å€™ï¼Œä¿å­˜æ“ä½œæ•°åŠæ“ä½œå€¼ */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Stack&lt;Integer&gt; VALUE_STACK = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String test = <span class="string">&quot;(((1+1)-3)+4)*(6+2)&quot;</span>;</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= test.length(); i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i == test.length())&#123;</span><br><span class="line">            <span class="keyword">while</span> (!SYMBOL_STACK.isEmpty())&#123;</span><br><span class="line">                sb.append(SYMBOL_STACK.pop());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sb.append(convert(String.valueOf(test.charAt(i))));</span><br><span class="line">    &#125;</span><br><span class="line">    String last = sb.toString();</span><br><span class="line">    System.out.println(sb.toString());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; last.length(); i++) &#123;</span><br><span class="line">        calculate(String.valueOf(last.charAt(i)));</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(VALUE_STACK.pop());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å¯¹è§£æåçš„æ•°æ®è¿›è¡Œè®¡ç®—</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: Create in 2022/10/20 16:16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">calculate</span><span class="params">(String opt)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(DEFAULT_SYMBOL_LIST.contains(opt))&#123;</span><br><span class="line">        Integer b = VALUE_STACK.pop();</span><br><span class="line">        Integer a = VALUE_STACK.pop();</span><br><span class="line">        <span class="keyword">int</span> calculate = SymbolEnum.calculate(a, b, opt);</span><br><span class="line">        VALUE_STACK.push(calculate);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        VALUE_STACK.push(Integer.parseInt(opt));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><div class="note green icon-padding flat"><i class="note-icon fas fa-fan"></i><p>åŸºäºæ ˆçš„FILOçš„ç‰¹æ€§ï¼Œåœ¨å¤„ç†ä¸€äº›éœ€è¦ç­‰å¾…ï¼Œè€Œä¸”éœ€è¦ä¿æŒæ•´ä½“é¡ºåºçš„ç®—æ³•ä¸­ï¼Œå…·æœ‰ç€æ— ä¸ä¼¦æ¯”çš„ä¼˜åŠ¿å’Œéå¸¸å¤§çš„æ™®é€‚æ€§ã€‚</p></div><div class="note green icon-padding flat"><i class="note-icon fas fa-fan"></i><p>å¯¹äºè‡ªç„¶è¯­è¨€åˆ°æœºå™¨è¯­è¨€çš„è½¬æ¢è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡çš„ç†è§£å¯¹äºè‡ªç„¶è¯­è¨€æ¥è¯´æ˜¯éå¸¸ç®€å•çš„ï¼Œä½†æ˜¯æœºå™¨è¯­è¨€ä¸­ï¼Œæœ€å¥½æ˜¯å‡å°‘ä¸Šä¸‹æ–‡çš„åˆ‡æ¢ï¼Œå‡å°‘é€»è¾‘å—çš„ä¼˜å…ˆçº§è·³è·ƒï¼Œæ‰èƒ½æ›´å¥½çš„æœåŠ¡äºç¼–ç å’Œæœºå™¨æ‰§è¡Œã€‚</p></div><div class="flink"><div class="flink-name">å‚è€ƒæ–‡çŒ®</div> <div class="flink-list">          <div class="flink-list-item">            <a href="https://blog.csdn.net/qq_22685435/article/details/119276976" title="CSDN" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://profile.csdnimg.cn/1/3/2/3_qq_22685435" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="CSDN" />              </div>              <div class="flink-item-name">CSDN</div>               <div class="flink-item-desc" title="javaä½¿ç”¨æ ˆè§£æç®—æœ¯è¡¨è¾¾å¼">javaä½¿ç”¨æ ˆè§£æç®—æœ¯è¡¨è¾¾å¼</div>            </a>          </div></div></div>]]></content>
    
    
    <summary type="html">åœ¨å¾ˆå¤šåŠ¨æ€å‚æ•°åŠé€»è¾‘å¤„ç†ä¸­ï¼Œå¸¸å¸¸éœ€è¦å¤„ç†å½¢å¦‚ç®—æœ¯è¡¨è¾¾å¼çš„åŠ¨æ€è¡¨è¾¾å¼ï¼Œä½¿ç”¨æ ˆçš„åŠŸèƒ½å¯¹ç®—æœ¯è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾æ³•ï¼Œå¯ä»¥å¿«é€Ÿçš„å®Œæˆè¡¨è¾¾å¼çš„ç»“æ„è§£æå’Œä¸šåŠ¡æ‰§è¡Œã€‚</summary>
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="https://blog.gladium.cn/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="ç®—æ³•" scheme="https://blog.gladium.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ ˆ" scheme="https://blog.gladium.cn/tags/%E6%A0%88/"/>
    
  </entry>
  
  <entry>
    <title>ODXè¿œç¨‹è¯Šæ–­å¹³å°è®¾è®¡ -- 0.å¼€ç¯‡</title>
    <link href="https://blog.gladium.cn/8e1.html"/>
    <id>https://blog.gladium.cn/8e1.html</id>
    <published>2022-10-11T00:00:00.000Z</published>
    <updated>2024-05-19T08:16:30.356Z</updated>
    
    <content type="html"><![CDATA[<p>ODXè¿œç¨‹è¯Šæ–­å¹³å°è®¾è®¡Â â€“Â 0.å¼€ç¯‡<br>ODXè¿œç¨‹è¯Šæ–­å¹³å°è®¾è®¡Â â€“Â 1.å¹³å°æ•´ä½“æ¶æ„è®¾è®¡æ€è·¯<br>ODXè¿œç¨‹è¯Šæ–­å¹³å°è®¾è®¡Â â€“Â 2.odxçš„jsonæ–‡ä»¶è§£æ„æ€è·¯åŠå¤„ç†<br>ODXè¿œç¨‹è¯Šæ–­å¹³å°è®¾è®¡Â â€“Â 3.åŸºäºDDDæ€è·¯çš„å¹³å°å¯¹è±¡æ„å»ºåŠåˆå§‹åŒ–<br>ODXè¿œç¨‹è¯Šæ–­å¹³å°è®¾è®¡Â â€“Â 4.åŸºäºé€’å½’ç®—æ³•çš„è§£ç æ¡†æ¶è®¾è®¡<br>ODXè¿œç¨‹è¯Šæ–­å¹³å°è®¾è®¡Â â€“Â 5.åŸºäºæœ‰ç•Œé˜Ÿåˆ—çš„ç¼–ç æ¡†æ¶è®¾è®¡<br>ODXè¿œç¨‹è¯Šæ–­å¹³å°è®¾è®¡Â â€“Â 6.åŸºäºæ—¶é—´è½®ç®—æ³•å®ç°çš„æµ·é‡å®šæ—¶ä»»åŠ¡ç®¡ç†<br>ODXè¿œç¨‹è¯Šæ–­å¹³å°è®¾è®¡Â â€“Â 7.å¼‚æ­¥ä¸šåŠ¡çš„å›è°ƒæ•´åˆåŠé€»è¾‘è®¾è®¡<br>ODXè¿œç¨‹è¯Šæ–­å¹³å°è®¾è®¡Â â€“Â 8.æ„å»ºAPPäº¤äº’ä¸­ä¸šåŠ¡å‚æ•°ä¼ è¾“é“¾<br>ODXè¿œç¨‹è¯Šæ–­å¹³å°è®¾è®¡Â â€“Â 9.æ¶æ„æ€»ç»“åŠæœªæ¥æ‰©å±•æ–¹å‘</p>]]></content>
    
    
    <summary type="html">åœ¨æ•´è½¦å”®åä¸­ï¼Œè¯Šæ–­æ˜¯ä¸€ç§å¸¸è§„ä¸”é‡è¦çš„æ‰‹æ®µï¼Œç”¨äºåˆ¤æ–­æ•´è½¦åœ¨è¡Œé©¶è¿‡ç¨‹ä¸­å‡ºç°çš„å„ç±»é—®é¢˜ï¼Œæ ‡è¯†ä¸åŒæ§åˆ¶å™¨çš„å„ç§å®æ—¶çŠ¶æ€ï¼Œé‡ç½®æˆ–ä¿®æ”¹è½¦è¾†éƒ¨åˆ†é…ç½®ã€‚</summary>
    
    
    
    <category term="æ¶æ„è®¾è®¡" scheme="https://blog.gladium.cn/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"/>
    
    
    <category term="ODX" scheme="https://blog.gladium.cn/tags/ODX/"/>
    
    <category term="è¿œç¨‹è¯Šæ–­" scheme="https://blog.gladium.cn/tags/%E8%BF%9C%E7%A8%8B%E8%AF%8A%E6%96%AD/"/>
    
    <category term="è®¾è®¡" scheme="https://blog.gladium.cn/tags/%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºæ—¶é—´è½®ç®—æ³•å®ç°çš„å®šæ—¶ä»»åŠ¡ç®¡ç†</title>
    <link href="https://blog.gladium.cn/8b56.html"/>
    <id>https://blog.gladium.cn/8b56.html</id>
    <published>2022-09-10T00:00:00.000Z</published>
    <updated>2024-05-19T08:16:30.356Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨åšè½¦è”ç½‘è½¦è¾†è¿œç¨‹è¯Šæ–­å¹³å°ï¼Œå‘ç°å¹³å°ä¸TBOXç»ˆç«¯é€šä¿¡æ—¶éœ€è¦ä¿æŒä¸€ä¸ªå¿ƒè·³æœºåˆ¶ï¼Œä¸æ™®é€šçš„ç”±å®¢æˆ·ç«¯å‘èµ·ï¼Œå¹³å°ç«¯ackçš„æ¨¡å¼ä¸ä¸€æ ·çš„æ˜¯æœ¬æ¬¡å¿ƒè·³éœ€è¦ç”±å¹³å°ç«¯ä¸»åŠ¨ä¿æŒï¼Œå³å¹³å°ç«¯æ¯éš”å‡ ç§’å‘é€ä¸€æ¬¡å¿ƒè·³åˆ°ç»ˆç«¯è®¾å¤‡ï¼Œæ­£å¸¸æ¥è¯´ä¸€èˆ¬é‡‡ç”¨Javaè‡ªå¸¦çš„Timeråšä¸€ä¸ªå®šæ—¶å³å¯ï¼Œä½†æ˜¯è€ƒè™‘åˆ°ç»ˆç«¯è®¾å¤‡é‡çº§è¿‡é«˜ï¼Œåœ¨å¹³å°ä¿å­˜å¤§é‡Timerå®ä¾‹å¯¹äºå¹³å°çš„èµ„æºå ç”¨ä¼šéå¸¸å¤šï¼Œé€ æˆæ€§èƒ½ä½ä¸‹çš„é—®é¢˜ï¼Œäºæ˜¯å†³å®šé‡‡ç”¨æ—¶é—´è½®ç®—æ³•çš„æ€è·¯æ¥è§£å†³è¿™ä¸ªæµ·é‡å®šæ—¶å™¨çš„æ–¹æ¡ˆã€‚</p><h1 id="ç®—æ³•è¯´æ˜"><a href="#ç®—æ³•è¯´æ˜" class="headerlink" title="ç®—æ³•è¯´æ˜"></a>ç®—æ³•è¯´æ˜</h1><p>æ—¶é—´è½®æ˜¯ä¸€ç§é«˜æ•ˆæ¥åˆ©ç”¨çº¿ç¨‹èµ„æºæ¥è¿›è¡Œæ‰¹é‡åŒ–è°ƒåº¦çš„ä¸€ç§è°ƒåº¦æ¨¡å‹ã€‚æŠŠå¤§æ‰¹é‡çš„è°ƒåº¦ä»»åŠ¡å…¨éƒ¨éƒ½ç»‘å®šåˆ°åŒä¸€ä¸ªçš„è°ƒåº¦å™¨ä¸Šé¢ï¼Œä½¿ç”¨è¿™ä¸€ä¸ªè°ƒåº¦å™¨æ¥è¿›è¡Œæ‰€æœ‰ä»»åŠ¡çš„ç®¡ç†ï¼ˆmanagerï¼‰ï¼Œè§¦å‘ï¼ˆtriggerï¼‰ä»¥åŠè¿è¡Œï¼ˆrunnableï¼‰ã€‚èƒ½å¤Ÿé«˜æ•ˆçš„ç®¡ç†å„ç§å»¶æ—¶ä»»åŠ¡ï¼Œå‘¨æœŸä»»åŠ¡ï¼Œé€šçŸ¥ä»»åŠ¡ç­‰ç­‰ã€‚<br>è¿™ä¸ªç®—æ³•å¹¿æ³›è¿ç”¨äºnettyï¼Œkafkaï¼Œakkaç­‰éœ€è¦ä½¿ç”¨boss/workè¿™ç§è°ƒåº¦çº¿ç¨‹å’Œå·¥ä½œçº¿ç¨‹éš”ç¦»çš„æ¨¡å¼æ¶æ„ä¸­ï¼Œåœ¨æˆ‘çš„ç†è§£ä¸­ï¼Œå°±æ˜¯å°†åŸæ¥çš„æ¯ä¸€ä¸ªTimerå®ä¾‹ï¼Œä½œä¸ºä¸€ä¸ªæ¯ç§’æ‰§è¡Œï¼Œæˆ–è€…æ¯å¾®ç§’æ‰§è¡Œçš„å®šæ—¶å™¨ï¼Œç„¶åå°†éœ€è¦æ‰§è¡Œçš„taskå…¨éƒ¨ç»‘å®šåœ¨æ¯ä¸ªæ—¶é—´åˆ»åº¦ä¸Šï¼Œä¸€æ—¦å½“å®šæ—¶å™¨æ‰§è¡Œåˆ°è¯¥åˆ»åº¦ï¼Œå³å¯ä»¥è§¦å‘å½“å‰åˆ»åº¦ä¸Šçš„æ‰€æœ‰taskï¼Œåˆ©ç”¨è¿™ç§æ–¹å¼èŠ‚çº¦Timerå®ä¾‹çš„èµ„æºæ¶ˆè€—ã€‚</p><h1 id="ç®—æ³•åŸç†"><a href="#ç®—æ³•åŸç†" class="headerlink" title="ç®—æ³•åŸç†"></a>ç®—æ³•åŸç†</h1><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/995a9e44daa7e001d491684e42cfa97d.png" alt="image.png"><br>æ—¶é—´è½®ç®—æ³•å¯ä»¥é€šè¿‡ä¸Šå›¾æ¥æè¿°ã€‚å‡è®¾æ—¶é—´è½®å¤§å°ä¸º10ï¼Œ1sè½¬ä¸€æ ¼ï¼Œæ¯æ ¼æŒ‡å‘ä¸€ä¸ªé“¾è¡¨ï¼Œä¿å­˜ç€å¾…æ‰§è¡Œçš„ä»»åŠ¡ã€‚<br>å‡è®¾ï¼Œå½“å‰ä½äº1ï¼Œç°åœ¨è¦æ·»åŠ ä¸€ä¸ª3såæŒ‡å‘çš„ä»»åŠ¡ï¼Œåˆ™1+3=4ï¼Œåœ¨ç¬¬4æ ¼çš„é“¾è¡¨ä¸­æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ä»»åŠ¡å³å¯ï¼Œæ ‡è¯†round=0ï¼ˆroundè¡¨ç¤ºåœˆæ•°ï¼‰ã€‚<br>å‡è®¾ï¼Œå½“å‰ä½äº1ï¼Œç°åœ¨è¦æ·»åŠ ä¸€ä¸ª10såæŒ‡å‘çš„ä»»åŠ¡ï¼Œåˆ™ï¼ˆ1+10ï¼‰% 10 = 1ï¼Œåˆ™åœ¨ç¬¬1æ ¼æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ä»»åŠ¡ï¼Œå¹¶æ ‡è¯†round=1ï¼ˆroundè¡¨ç¤ºåœˆæ•°ï¼‰ï¼Œåˆ™å½“æ—¶é—´è½®ç¬¬äºŒæ¬¡ç»è¿‡ç¬¬1æ ¼æ—¶ï¼Œå³ä¼šæ‰§è¡Œä»»åŠ¡ã€‚<br>æ—¶é—´è½®åªä¼šæ‰§è¡Œround=0çš„ä»»åŠ¡ï¼Œå¹¶ä¼šæŠŠè¯¥æ ¼å­ä¸Šçš„å…¶ä»–ä»»åŠ¡çš„roundå‡1ã€‚</p><blockquote><p><strong>Q:ä¸ºä»€ä¹ˆæ—¶é—´æ®µæ˜¯ä¸€ä¸ªåœ†å½¢ï¼Ÿé‡‡ç”¨ç¯å½¢é“¾è¡¨?</strong><br>A:ä¹‹æ‰€ä»¥ä½¿ç”¨ç¯å½¢çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦æ˜¯å¤„ç†æ—¶é—´è·¨åº¦å¾ˆå¤§çš„é—®é¢˜ã€‚å‡å¦‚æˆ‘ä»¬1sæ˜¯ä¸€ä¸ªæ—¶é—´æ®µï¼Œä¸€å¤©24å°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ’åˆ†24<em>60</em>60=86400ä¸ªåŒºé—´ï¼Œå¦‚æœæ˜¯1ä¸ªæœˆå‘¢ã€‚æ˜¾ç„¶ç¯å½¢ç»“æ„å¯ä»¥å¾ˆä¼˜é›…çš„å¤„ç†è¯¥é—®é¢˜ã€‚<br><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/a3f10d89003cff2218721f518cfd1e31.png" alt="image.png"><br>å¦‚å›¾æˆ‘ä»¬è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå‘¨æœŸä¸º12ç§’çš„åœ†å½¢ï¼Œæ¯ä¸ªæ•°å­—é—´éš”æ˜¯1sã€‚æˆ‘ä»¬è¦è¡¨ç¤º60så°±æ˜¯60/12=5ã€‚ä¹Ÿå°±æ˜¯æŒ‡é’ˆä»12å¼€å§‹è½¬5åœˆã€‚ç”±æ­¤å¯è§ï¼Œä¸€ä¸ªåœ†å½¢å¯ä»¥å¤„ç†ä»»ä½•æ—¶é—´è·¨åº¦ã€‚</p></blockquote><h1 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h1><ul><li><p>ä»£ç ç»“æ„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">com.gladium.timer</span><br><span class="line">â”œâ”€â”€ Timer                                      // Timerå®ä¾‹æ¥å£             </span><br><span class="line">â”œâ”€â”€ TimerTask                                  // taskå®šä¹‰çˆ¶ç±»             </span><br><span class="line">â”œâ”€â”€ TimingWheel                                // æ—¶é—´è°ƒåº¦åŠé˜Ÿåˆ—å¤„ç†             </span><br><span class="line">â”œâ”€â”€ TimerTaskEntry                             // taskå®šæ—¶ä¿¡æ¯             </span><br><span class="line">â”œâ”€â”€ TimerTaskList                              // taskåˆ—è¡¨ç®¡ç†            </span><br><span class="line">â”œâ”€â”€ CancelCallBackTask                         // taské€€å‡ºæ‰§è¡Œçš„ä»»åŠ¡å®šä¹‰çˆ¶ç±»            </span><br><span class="line">â”œâ”€â”€ impl                                       </span><br><span class="line">â”‚       â””â”€â”€ TimerImpl                          // Timerå®ç°ç±»ï¼Œç®¡ç†boss/taskçº¿ç¨‹æ±              </span><br><span class="line">â”œâ”€â”€ biz                                        // ä¸šåŠ¡å¤„ç†            </span><br><span class="line">â”‚       â””â”€â”€ HeartBeatTask                      // å¿ƒè·³ä¸šåŠ¡(éœ€è¦å¾ªç¯çš„ä¸šåŠ¡ä¸»ç±»)            </span><br><span class="line">â”‚       â””â”€â”€ ReturnControllerCallBackTask       // å½’è¿˜è¿æ¥(taskè¶…æ—¶é€€å‡ºæ—¶æ‰§è¡Œæ£€æŸ¥)             </span><br><span class="line">â”‚       â””â”€â”€ TimerWheelPool                     // ä¸šåŠ¡ç®¡æ§(åŒ…å«æœ‰å¾ªç¯ä¸­æ–­ï¼Œç»­æœŸç­‰ä¸šåŠ¡å°è£…)</span><br></pre></td></tr></table></figure></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gladium.timer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Timer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢åŠ ä¸€ä¸ªå»¶è¿Ÿä»»åŠ¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> task</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(TimerTask task)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒæ•´æ—¶é—´è½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">advanceClock</span><span class="params">(<span class="keyword">long</span> timeout)</span> <span class="keyword">throws</span> InterruptedException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  å½“å‰ä»»åŠ¡æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…³é—­æ—¶é—´è½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">shutdown</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gladium.timer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">TimerTask</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** å»¶æ—¶æ—¶é—´ */</span></span><br><span class="line">    <span class="keyword">long</span> delayTime;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** ä»»åŠ¡è¿è¡Œä¸»ç±» */</span></span><br><span class="line">    <span class="keyword">private</span> TimerTaskEntry timerTaskEntry;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** é€€å‡ºå›è°ƒè¿è¡Œä¸»ç±» */</span></span><br><span class="line">    <span class="keyword">private</span> CancelCallBackTask callBackTask;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** æœ€é•¿è¿è¡Œæ—¶é—´ é»˜è®¤10åˆ†é’Ÿ */</span></span><br><span class="line">    <span class="keyword">long</span> maxTime = <span class="number">10</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** æ˜¯å¦æ˜¯å¾ªç¯ä»»åŠ¡ é»˜è®¤å¦ */</span></span><br><span class="line">    <span class="keyword">boolean</span> isCycle = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimerTask</span><span class="params">(<span class="keyword">long</span> delayTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.delayTime = delayTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimerTask</span><span class="params">(<span class="keyword">long</span> delayTime, <span class="keyword">long</span> maxTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.delayTime = delayTime;</span><br><span class="line">        <span class="keyword">this</span>.maxTime = maxTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimerTask</span><span class="params">(<span class="keyword">long</span> delayTime, <span class="keyword">long</span> maxTime, <span class="keyword">boolean</span> isCycle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.delayTime = delayTime;</span><br><span class="line">        <span class="keyword">this</span>.maxTime = maxTime;</span><br><span class="line">        <span class="keyword">this</span>.isCycle = isCycle;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimerTask</span><span class="params">(<span class="keyword">long</span> delayTime, <span class="keyword">long</span> maxTime, <span class="keyword">boolean</span> isCycle,CancelCallBackTask callBackTask)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.delayTime = delayTime;</span><br><span class="line">        <span class="keyword">this</span>.maxTime = maxTime;</span><br><span class="line">        <span class="keyword">this</span>.isCycle = isCycle;</span><br><span class="line">        <span class="keyword">this</span>.callBackTask = callBackTask;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>:  ç›´æ¥è°ƒç”¨å½“å‰å¯¹è±¡çš„é€€å‡º</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>:</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: Create in 2022/9/8 9:43</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">cancel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (timerTaskEntry != <span class="keyword">null</span>) &#123;</span><br><span class="line">            timerTaskEntry.remove();</span><br><span class="line">        &#125;</span><br><span class="line">        timerTaskEntry = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>:  è°ƒç”¨å­ç±»çš„åˆ¤æ–­æ–¹æ³• ç”¨äºåˆ¤æ–­å½“å‰ä»»åŠ¡æ˜¯å¦ç»“æŸ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: boolean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: Create in 2022/9/8 9:43</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">boolean</span> <span class="title">isCancel</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>:  è°ƒç”¨å­ç±»çš„è¶…æ—¶æ—¶é—´ç»­æœŸï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦é‡ç½®è¶…æ—¶æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: boolean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: Create in 2022/9/8 9:43</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">checkTimeOut</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TimerTaskEntry <span class="title">getTimerTaskEntry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> timerTaskEntry;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">setTimerTaskEntry</span><span class="params">(TimerTaskEntry entry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// if this timerTask is already held by an existing timer task entry,</span></span><br><span class="line">        <span class="comment">// we will remove such an entry first.</span></span><br><span class="line">        <span class="keyword">if</span> (timerTaskEntry != <span class="keyword">null</span> &amp;&amp; timerTaskEntry != entry) &#123;</span><br><span class="line">            timerTaskEntry.remove();</span><br><span class="line">        &#125;</span><br><span class="line">        timerTaskEntry = entry;</span><br><span class="line">        <span class="keyword">this</span>.timerTaskEntry = timerTaskEntry;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gladium.timer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.DelayQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimingWheel</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> tickMs;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> wheelSize;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> interval;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> startMs;</span><br><span class="line">    <span class="keyword">private</span> AtomicInteger taskCounter;</span><br><span class="line">    <span class="keyword">private</span> DelayQueue queue;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> currentTime;</span><br><span class="line">    <span class="keyword">private</span> TimerTaskList[] buckets;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> TimingWheel overflowWheel;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tickMs è½®å­æ¯ä¸ªæ ¼å­çš„æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> wheelSize æ¯ä¸ªè½®å­çš„å¤§å°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> startMs å¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> taskCounter ä»»åŠ¡è®¡æ•°å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queue å»¶è¿Ÿé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimingWheel</span><span class="params">(<span class="keyword">long</span> tickMs, <span class="keyword">int</span> wheelSize, <span class="keyword">long</span> startMs, AtomicInteger taskCounter, DelayQueue queue)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.tickMs = tickMs;</span><br><span class="line">        <span class="keyword">this</span>.wheelSize = wheelSize;</span><br><span class="line">        <span class="keyword">this</span>.interval = tickMs * wheelSize;</span><br><span class="line">        <span class="keyword">this</span>.startMs = startMs;</span><br><span class="line">        <span class="keyword">this</span>.taskCounter = taskCounter;</span><br><span class="line">        <span class="keyword">this</span>.queue = queue;</span><br><span class="line">        <span class="keyword">this</span>.currentTime = startMs - (startMs % tickMs);</span><br><span class="line">        buckets = <span class="keyword">new</span> TimerTaskList[wheelSize];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; wheelSize; i++) &#123;</span><br><span class="line">            buckets[i] = <span class="keyword">new</span> TimerTaskList(taskCounter);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢åŠ ä¸€ä¸ªä¸Šå±‚æ—¶é—´è½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addOverflowWheel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (overflowWheel == <span class="keyword">null</span>) &#123;</span><br><span class="line">                overflowWheel = <span class="keyword">new</span> TimingWheel(interval, wheelSize, startMs, taskCounter, queue);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ ä»»åŠ¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timerTaskEntry</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(TimerTaskEntry timerTaskEntry)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> expiration = timerTaskEntry.expirationMs;</span><br><span class="line">        <span class="keyword">boolean</span> res = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (timerTaskEntry.cancelled()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (expiration &lt; currentTime + tickMs) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (expiration &lt; currentTime + interval) &#123;</span><br><span class="line">            <span class="keyword">long</span> virtualId = expiration / tickMs;</span><br><span class="line">            <span class="keyword">int</span> index = (<span class="keyword">int</span>) (virtualId % wheelSize);</span><br><span class="line">            TimerTaskList bucket = buckets[index];</span><br><span class="line">            bucket.add(timerTaskEntry);</span><br><span class="line">            <span class="keyword">if</span> (bucket.setExpiration(virtualId * tickMs)) &#123;</span><br><span class="line">                queue.offer(bucket);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (overflowWheel == <span class="keyword">null</span>) &#123;</span><br><span class="line">                addOverflowWheel();</span><br><span class="line">            &#125;</span><br><span class="line">            overflowWheel.add(timerTaskEntry);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ—¶é—´æ¨è¿›</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeMs</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">advanceClock</span><span class="params">(<span class="keyword">long</span> timeMs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (timeMs &gt;= currentTime + tickMs) &#123;</span><br><span class="line">            currentTime = timeMs - (timeMs % tickMs);</span><br><span class="line">            <span class="comment">// Try to advance the clock of the overflow wheel if present</span></span><br><span class="line">            <span class="keyword">if</span> (overflowWheel != <span class="keyword">null</span>) &#123;</span><br><span class="line">                overflowWheel.advanceClock(currentTime);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gladium.timer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimerTaskEntry</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    TimerTask timerTask;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> expirationMs;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> firstExecuteTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">volatile</span> TimerTaskList list;</span><br><span class="line">    TimerTaskEntry next;</span><br><span class="line">    TimerTaskEntry prev;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimerTaskEntry</span><span class="params">(TimerTask timerTask, <span class="keyword">long</span> expirationMs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.timerTask = timerTask;</span><br><span class="line">        <span class="keyword">this</span>.expirationMs = expirationMs;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.firstExecuteTime == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">// åœ¨å¾ªç¯æ—¶ç»§æ‰¿ä¹‹å‰çš„é¦–æ¬¡æ‰§è¡Œæ—¶é—´</span></span><br><span class="line">            setFirstExecuteTime(Optional.ofNullable(timerTask).map(TimerTask::getTimerTaskEntry).map(TimerTaskEntry::getFirstExecuteTime).filter(p -&gt; p != <span class="number">0</span>).orElse(expirationMs));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (timerTask != <span class="keyword">null</span>) &#123;</span><br><span class="line">            timerTask.setTimerTaskEntry(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡ç½®å¼€å§‹æ‰§è¡Œæ—¶é—´ ä¸ºäº†é‡ç½®è¶…æ—¶æ—¶é—´</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">renewFirstExecuteTime</span><span class="params">(<span class="keyword">long</span> firstExecuteTime)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.firstExecuteTime = firstExecuteTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">setFirstExecuteTime</span><span class="params">(<span class="keyword">long</span> firstExecuteTime)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.firstExecuteTime == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.firstExecuteTime = firstExecuteTime;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">cancelled</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> timerTask.getTimerTaskEntry() != <span class="keyword">this</span> || timerTask.isCancel();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¯å¦è¶…è¿‡æœ€å¤§çš„è¶…æ—¶æ—¶é—´</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isTimeOut</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// æ¯æ¬¡å‡æ‰§è¡Œè¶…æ—¶æ£€æŸ¥ï¼Œä¸»è¦æ˜¯è°ƒç”¨å­ç±»çš„æ–¹æ³•ï¼Œå¯¹è¶…æ—¶ç­–ç•¥è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">        timerTask.checkTimeOut();</span><br><span class="line">        <span class="keyword">return</span> firstExecuteTime != <span class="number">0</span> &amp;&amp; ((firstExecuteTime + timerTask.getMaxTime() - timerTask.getDelayTime()) &lt;= System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¯å¦æ‰§è¡Œcallback</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isExecuteCallBack</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> timerTask.getCallBackTask().isExecute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        TimerTaskList currentList = list;</span><br><span class="line">        <span class="comment">// If remove is called when another thread is moving the entry from a task entry list to another,</span></span><br><span class="line">        <span class="comment">// this may fail to remove the entry due to the change of value of list. Thus, we retry until the list becomes null.</span></span><br><span class="line">        <span class="comment">// In a rare case, this thread sees null and exits the loop, but the other thread insert the entry to another list later.</span></span><br><span class="line">        <span class="keyword">while</span> (currentList != <span class="keyword">null</span>) &#123;</span><br><span class="line">            currentList.remove(<span class="keyword">this</span>);</span><br><span class="line">            currentList = list;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TimerTask <span class="title">getTimerTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> timerTask;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTimerTask</span><span class="params">(TimerTask timerTask)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.timerTask = timerTask;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getFirstExecuteTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> firstExecuteTime;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gladium.timer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Delayed;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicLong;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimerTaskList</span> <span class="keyword">implements</span> <span class="title">Delayed</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TimerTaskEntry root = <span class="keyword">new</span> TimerTaskEntry(<span class="keyword">null</span>, -<span class="number">1L</span>);</span><br><span class="line">    <span class="keyword">private</span> AtomicLong expiration = <span class="keyword">new</span> AtomicLong(-<span class="number">1L</span>);</span><br><span class="line">    <span class="keyword">private</span> AtomicInteger taskCounter;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimerTaskList</span><span class="params">(AtomicInteger taskCounter)</span> </span>&#123;</span><br><span class="line">        root.prev = root;</span><br><span class="line">        root.next = root;</span><br><span class="line">        <span class="keyword">this</span>.taskCounter = taskCounter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(TimerTaskEntry timerTaskEntry)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> done = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">while</span> (!done) &#123;</span><br><span class="line">            timerTaskEntry.remove();</span><br><span class="line">            <span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (timerTaskEntry.list == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    TimerTaskEntry tail = root.prev;</span><br><span class="line">                    timerTaskEntry.next = root;</span><br><span class="line">                    timerTaskEntry.prev = tail;</span><br><span class="line">                    timerTaskEntry.list = <span class="keyword">this</span>;</span><br><span class="line">                    tail.next = timerTaskEntry;</span><br><span class="line">                    root.prev = timerTaskEntry;</span><br><span class="line">                    taskCounter.incrementAndGet();</span><br><span class="line">                    done = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">setExpiration</span><span class="params">(<span class="keyword">long</span> expirationMs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> expiration.getAndSet(expirationMs) != expirationMs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getExpiration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> expiration.get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(TimerTaskEntry timerTaskEntry)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (timerTaskEntry.list.equals(<span class="keyword">this</span>)) &#123;</span><br><span class="line">                timerTaskEntry.next.prev = timerTaskEntry.prev;</span><br><span class="line">                timerTaskEntry.prev.next = timerTaskEntry.next;</span><br><span class="line">                timerTaskEntry.next = <span class="keyword">null</span>;</span><br><span class="line">                timerTaskEntry.prev = <span class="keyword">null</span>;</span><br><span class="line">                timerTaskEntry.list = <span class="keyword">null</span>;</span><br><span class="line">                taskCounter.decrementAndGet();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">flush</span><span class="params">(Consumer&lt;TimerTaskEntry&gt; flush)</span> </span>&#123;</span><br><span class="line">        TimerTaskEntry head = root.next;</span><br><span class="line">        <span class="keyword">while</span>(!head.equals(root)) &#123;</span><br><span class="line">            remove(head);</span><br><span class="line">            flush.accept(head);</span><br><span class="line">            head = root.next;</span><br><span class="line">        &#125;</span><br><span class="line">        expiration.set(-<span class="number">1L</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getDelay</span><span class="params">(TimeUnit unit)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(<span class="number">0</span>, unit.convert(expiration.get() - System.currentTimeMillis(), TimeUnit.MILLISECONDS));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Delayed o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> TimerTaskList) &#123;</span><br><span class="line">            <span class="keyword">return</span> Long.compare(expiration.get(), ((TimerTaskList) o).getExpiration());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gladium.timer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: ä»»åŠ¡é€€å‡ºåå›è°ƒæ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> Create in 2022/9/9 15:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">CancelCallBackTask</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>:  æ˜¯å¦å¯ä»¥æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: boolean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: Create in 2022/9/9 15:58</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">boolean</span> <span class="title">isExecute</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gladium.timer.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gladium.timer.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.DelayQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReadWriteLock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantReadWriteLock;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:  æ—¶é—´è½®å®ç°ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: Create in 2022/9/9 16:34</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimerImpl</span> <span class="keyword">implements</span> <span class="title">Timer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ExecutorService taskExecutor;</span><br><span class="line">    <span class="keyword">private</span> ExecutorService bossExecutor;</span><br><span class="line">    <span class="keyword">private</span> DelayQueue&lt;TimerTaskList&gt; delayQueue = <span class="keyword">new</span> DelayQueue&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> AtomicInteger taskCounter = <span class="keyword">new</span> AtomicInteger();</span><br><span class="line">    <span class="keyword">private</span> TimingWheel timingWheel;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ReadWriteLock readWriteLock = <span class="keyword">new</span> ReentrantReadWriteLock();</span><br><span class="line">    <span class="keyword">private</span> Lock readLock = readWriteLock.readLock();</span><br><span class="line">    <span class="keyword">private</span> Lock writeLock = readWriteLock.writeLock();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimerImpl</span><span class="params">(<span class="keyword">long</span> tickMs, <span class="keyword">int</span> wheelSize, <span class="keyword">long</span> pollInterval)</span> </span>&#123;</span><br><span class="line">        timingWheel = <span class="keyword">new</span> TimingWheel(tickMs, wheelSize, System.currentTimeMillis(), taskCounter, delayQueue);</span><br><span class="line">        taskExecutor = Executors.newFixedThreadPool(<span class="number">100</span>);</span><br><span class="line">        bossExecutor = Executors.newFixedThreadPool(<span class="number">1</span>);</span><br><span class="line">        bossExecutor.submit((Runnable) () -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    advanceClock(pollInterval);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(TimerTask task)</span> </span>&#123;</span><br><span class="line">        readLock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            addTimerTaskEntry(<span class="keyword">new</span> TimerTaskEntry(task, task.getDelayTime() + System.currentTimeMillis()));</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            readLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addTimerTaskEntry</span><span class="params">(TimerTaskEntry timerTaskEntry)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!timingWheel.add(timerTaskEntry)) &#123;</span><br><span class="line">            <span class="comment">// æ ¡éªŒä»»åŠ¡æ˜¯å¦é€€å‡º  æ ¡éªŒä»»åŠ¡æ˜¯å¦è¶…æ—¶</span></span><br><span class="line">            <span class="keyword">if</span> ((!timerTaskEntry.cancelled())  &amp;&amp; (!timerTaskEntry.isTimeOut())) &#123;</span><br><span class="line">                taskExecutor.submit(timerTaskEntry.getTimerTask());</span><br><span class="line">                <span class="comment">// å¾ªç¯ä»»åŠ¡ï¼Œåˆ™ç»§ç»­æäº¤åˆ°ä¸‹ä¸€ä¸ªæ—¶é—´åˆ»åº¦</span></span><br><span class="line">                <span class="keyword">if</span>(timerTaskEntry.getTimerTask().isCycle())&#123;</span><br><span class="line">                    add(timerTaskEntry.getTimerTask());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                CancelCallBackTask cancelCallBackTask = Optional.ofNullable(timerTaskEntry).map(TimerTaskEntry::getTimerTask).map(TimerTask::getCallBackTask).orElse(<span class="keyword">null</span>);</span><br><span class="line">                <span class="comment">// æ‰§è¡Œæœ€åæ•°æ®ç»“æŸåçš„å›è°ƒæ–¹æ³• ä¸­é€”æ‰“æ–­å æ— æ³•æ‰§è¡Œåç»­å›è°ƒ</span></span><br><span class="line">                <span class="keyword">if</span>(cancelCallBackTask != <span class="keyword">null</span> &amp;&amp; timerTaskEntry != <span class="keyword">null</span> &amp;&amp; timerTaskEntry.isExecuteCallBack())&#123;</span><br><span class="line">                    taskExecutor.submit(cancelCallBackTask);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">advanceClock</span><span class="params">(<span class="keyword">long</span> timeout)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        TimerTaskList bucket = delayQueue.poll(timeout, TimeUnit.MILLISECONDS);</span><br><span class="line">        <span class="keyword">boolean</span> res;</span><br><span class="line">        <span class="keyword">if</span> (bucket != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                writeLock.lock();</span><br><span class="line">                <span class="keyword">while</span> (bucket != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    timingWheel.advanceClock(bucket.getExpiration());</span><br><span class="line">                    bucket.flush(<span class="keyword">this</span>::addTimerTaskEntry);</span><br><span class="line">                    bucket = delayQueue.poll();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                writeLock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> taskCounter.get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shutdown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        taskExecutor.shutdown();</span><br><span class="line">        bossExecutor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gladium.timer.biz;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.common.collect.Lists;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.core.KafkaTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å¿ƒè·³å®šæ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> Create in 2022/9/8 13:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeartBeatTask</span> <span class="keyword">extends</span> <span class="title">TimerTask</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> DateTimeFormatter dtf = DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">HeartBeatTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// é»˜è®¤å®ä¾‹åŒ–çˆ¶ç±»</span></span><br><span class="line">        <span class="keyword">super</span>(DELAY_TIME,MAX_TIME,IS_CYCLE);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>:  æ„å»ºä»»åŠ¡å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: Create in 2022/9/8 13:51</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HeartBeatTask</span><span class="params">(CancelCallBackTask callBackTask)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(DELAY_TIME,MAX_TIME,IS_CYCLE,callBackTask);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åœ¨æ­¤å¤„å®Œæˆå…·ä½“éœ€æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">        System.out.println(dtf.format(LocalDateTime.now()) +<span class="string">&quot;  å‘é€å¿ƒè·³&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">isCancel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¯ä»¥é‡‡ç”¨ç›‘å¬å…¬å…±ç±»ï¼Œredisç­‰å”¯ä¸€ä¿¡æ¯åˆ¤æ–­true/false</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">checkTimeOut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ ¹æ®æƒ…å†µï¼Œæ‰§è¡Œé‡ç½®è¶…æ—¶æ—¶é—´</span></span><br><span class="line">        <span class="keyword">this</span>.getTimerTaskEntry().renewFirstExecuteTime(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gladium.timer.biz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.common.collect.Lists;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.core.KafkaTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å½’è¿˜æ§åˆ¶æƒé™ å¿ƒè·³ä»»åŠ¡ç»“æŸåæ‰§è¡Œ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> Create in 2022/9/9 16:35</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReturnControllerCallBackTask</span> <span class="keyword">extends</span> <span class="title">CancelCallBackTask</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ReturnControllerCallBackTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">isExecute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// é€šè¿‡ç›‘å¬å…¬å…±ç±»ï¼Œredisç­‰æ•°æ®ï¼Œæ ¡éªŒæ˜¯å¦æ‰§è¡Œå¾ªç¯ç»“æŸåå›è°ƒ</span></span><br><span class="line">        <span class="comment">// è¯¥æ ¡éªŒåªä¼šæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åœ¨æ­¤å¤„å®Œæˆå¾ªç¯ç»“æŸåéœ€è¦å®Œæˆçš„ä»»åŠ¡</span></span><br><span class="line">        System.out.println(dtf.format(LocalDateTime.now()) +<span class="string">&quot;  é»˜è®¤å›è°ƒå‘é€å½’è¿˜æ§åˆ¶&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gladium.timer.biz;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: æ—¶é—´è½®å®šæ—¶ä»»åŠ¡æ± </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> Create in 2022/9/8 14:25</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimerWheelPool</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Timer timer= <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>:  æ–°å¢ä»»åŠ¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: timerTask</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: Create in 2022/9/8 14:29</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addTask</span><span class="params">(TimerTask timerTask)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(timer == <span class="keyword">null</span>)&#123;</span><br><span class="line">            timer = <span class="keyword">new</span> TimerImpl(<span class="number">1000</span>, <span class="number">10</span>, <span class="number">5000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        timer.add(timerTask);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>:  è·å–å½“å‰ä»»åŠ¡é‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>:</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: int</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: Create in 2022/9/8 14:30</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> timer == <span class="keyword">null</span>?<span class="number">0</span>:timer.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>:  é€€å‡ºä»»åŠ¡ éœ€è¦æ ¡éªŒæ˜¯å¦å®Œæˆ ç­‰ä»»åŠ¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: Create in 2022/9/8 14:33</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">cancelTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">new</span> HeartBeatTask().addCancelTask();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>:  ç»­æœŸä»»åŠ¡ å›è°ƒå®Œæˆ å½’è¿˜æ§åˆ¶ ç­‰ä»»åŠ¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: Create in 2022/9/8 14:33</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">renewTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">new</span> HeartBeatTask().addRenewTask();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ—¶é—´è½®ç®—æ³•çš„é«˜æ•ˆçš„ç®¡ç†å’Œè¾ƒä½çš„èµ„æºå ç”¨ä½¿å¾—æ­¤ç®—æ³•æˆä¸ºä¼—å¤šé«˜ååï¼Œé«˜å¹¶å‘æ¡†æ¶çš„é¦–é€‰ï¼Œä½†æ—¶é—´è½®ç®—æ³•äº¦æœ‰å…¶å¼Šç«¯ï¼š</p><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>ç²¾åº¦å–å†³äºæ¯ä¸€æ ¼ç²¾åº¦ï¼Œç²¾åº¦è¶Šå°è¯¯å·®è¶Šå°ï¼Œå½“éšä¹‹è€Œæ¥çš„ï¼Œç²¾åº¦è¶Šå°ï¼Œæ‰€èƒ½æ‰¿è½½çš„ä»»åŠ¡æ—¶é—´è·¨åº¦å°±è¶Šå°ï¼Œå³ä½¿ä½¿ç”¨åˆ†å±‚æ—¶é—´è®ºï¼Œä½†æ˜¯å±‚æ¬¡çš„åˆ‡æ¢ä¹Ÿä¼šä½¿å¾—æ•ˆç‡å¤§æ‰“æŠ˜æ‰£ã€‚</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>æ—¶é—´è½®æ— æ³•å¤‡ä»½ï¼Œå½“æœåŠ¡å™¨å®•æœºæ—¶ä¼šä¸¢å¤±æ‰€æœ‰ä»»åŠ¡ã€‚</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>åˆ†å¸ƒå¼æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°ä»»åŠ¡åˆ†é…ä¸å‡çš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿæ— æ³•åˆç†çš„åˆ†é…èµ„æºå’Œä»»åŠ¡çš„æ¯”é‡ã€‚</p></div><div class="flink"><div class="flink-name">å‚è€ƒæ–‡çŒ®</div> <div class="flink-list">          <div class="flink-list-item">            <a href="https://zhuanlan.zhihu.com/p/356647675" title="çŸ¥ä¹" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://picx.zhimg.com/v2-a406e6b728fbaa319e59b22a50aca1ca_xl.jpg?source=32738c0c" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="çŸ¥ä¹" />              </div>              <div class="flink-item-name">çŸ¥ä¹</div>               <div class="flink-item-desc" title="æ—¶é—´è½®ç®—æ³•">æ—¶é—´è½®ç®—æ³•</div>            </a>          </div></div></div>]]></content>
    
    
    <summary type="html">åœ¨å¿ƒè·³ï¼Œé•¿è¿æ¥ç­‰æµ·é‡å®šæ—¶å™¨å’Œå¤§æ‰¹é‡è°ƒåº¦ä»»åŠ¡åœºæ™¯ä¸‹ï¼ŒåŸºäºæ—¶é—´è½®ç®—æ³•çš„å®šæ—¶ä»»åŠ¡ç®¡ç†æ¨¡å‹æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæœ‰æ•ˆçš„é™ä½æœåŠ¡å™¨èµ„æºå ç”¨å’Œå®Œæˆé«˜æ•ˆè°ƒåº¦çš„æ‰‹æ®µã€‚</summary>
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="https://blog.gladium.cn/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="ç®—æ³•" scheme="https://blog.gladium.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="java" scheme="https://blog.gladium.cn/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>è¯­é›€äº‘ç«¯å†™ä½œ Hexo+Github Actions+COSæŒç»­é›†æˆ</title>
    <link href="https://blog.gladium.cn/4880.html"/>
    <id>https://blog.gladium.cn/4880.html</id>
    <published>2022-01-19T00:00:00.000Z</published>
    <updated>2022-01-19T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>æµ‹è¯•ä¸€ä¸‹è‡ªåŠ¨æ›´æ–°ä¿®æ”¹ç­‰å’Œgitå®šæ—¶ä»»åŠ¡å‘å¸ƒï¼Œå“ˆå“ˆå“ˆ11111111113333555666<br>æµ‹è¯•è‡ªåŠ¨å‘å¸ƒ å‘å¸ƒæµ‹è¯•æµ‹è¯•<br>è‡ªåŠ¨è§¦å‘github1111</p><p>ä½¿ç”¨ä¸€ä¸‹æŒ‰é’® <kbd>ctrl</kbd>+<kbd>alt</kbd>+<kbd>del</kbd>  è¿™ä¸ªæ˜¯å¾ˆ <strong>é‡è¦çš„</strong> çš„ç”¨æ³•<br>åŒæ—¶å¯ä»¥ä½¿ç”¨ <samp>æ ·æœ¬æ–‡æœ¬</samp> </p><p><em>å¼ºè°ƒæ–‡æœ¬</em><br><br><strong>åŠ ç²—æ–‡æœ¬</strong><br><br><dfn>å®šä¹‰é¡¹ç›®</dfn><br><br><code>ä¸€æ®µç”µè„‘ä»£ç  print("Hello World")</code><br><br><samp>è®¡ç®—æœºæ ·æœ¬</samp><br><br><kbd>é”®ç›˜è¾“å…¥</kbd><br><br><var>å˜é‡</var><br><code>main</code><br>==keyWords==</p><dl>    <dt>Definition list</dt>    <dd>Is something people use sometimes.</dd><pre><code>&lt;dt&gt;Markdown in HTML&lt;/dt&gt;&lt;dd&gt;Does *not* work **very** well. Use HTML &lt;em&gt;tags&lt;/em&gt;.&lt;/dd&gt;</code></pre></dl><p>åä¸½çš„<em>åˆ†å‰²çº¿111</em></p><hr><div class="flink"><div class="flink-name">å‹æƒ…è¿æ¥</div><div class="flink-desc">å“ªäº›äºº</div> <div class="flink-list">          <div class="flink-list-item">            <a href="https://blog.gladium.cn" title="JECC" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://jerryc.me/img/avatar.png" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="JECC" />              </div>              <div class="flink-item-name">JECC</div>               <div class="flink-item-desc" title="æµ‹è¯•">æµ‹è¯•</div>            </a>          </div></div></div><p><img src="https://blog-1256354278.cos.ap-shanghai.myqcloud.com/blog-images/50bae534377ec2ae9ae23f6362cbb8a8.jpeg" alt="W_2014_357.jpg"></p>]]></content>
    
    
    <summary type="html">Hexoç»ˆæç©æ³•è¯­é›€äº‘ç«¯å†™ä½œé…åˆwebhook+è…¾è®¯äº‘å‡½æ•°+Hexo+Github Actions+COSé™æ€ç½‘+CDNæŒç»­é›†æˆçš„ä¸ªäººåšå®¢éƒ¨ç½²æ–¹æ¡ˆ</summary>
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="https://blog.gladium.cn/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="CI/CD" scheme="https://blog.gladium.cn/tags/CI-CD/"/>
    
    <category term="Hexo" scheme="https://blog.gladium.cn/tags/Hexo/"/>
    
  </entry>
  
</feed>
